<!doctype html><html lang=en><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="I updated my Arch system, and all I would get is a black screen. I fixed it by rebuilding some AUR packages.">
<meta property="og:title" content="I broke my Arch System">
<meta property="og:description" content="I updated my Arch system, and all I would get is a black screen. I fixed it by rebuilding some AUR packages.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://pranshugaba.com/dev/i-broke-my-arch/">
<meta property="og:image" content="https://res.cloudinary.com/pranshugaba/image/upload/w_1280,h_669,c_fill,q_auto,f_auto/w_770,c_fit,co_rgb:121212,g_south_west,x_480,y_375,l_text:inter-semibold.ttf_80_line_spacing_-6_letter_spacing_-3:I broke my Arch System/w_750,c_fit,co_rgb:121212,g_north_west,x_480,y_350,l_text:inter-regular.ttf_56_letter_spacing_-1:I updated my system%252C and now I only see a black screen/social.png">
<meta property="twitter:image" content="https://res.cloudinary.com/pranshugaba/image/upload/w_1280,h_669,c_fill,q_auto,f_auto/w_770,c_fit,co_rgb:121212,g_south_west,x_480,y_375,l_text:inter-semibold.ttf_80_line_spacing_-6_letter_spacing_-3:I broke my Arch System/w_750,c_fit,co_rgb:121212,g_north_west,x_480,y_350,l_text:inter-regular.ttf_56_letter_spacing_-1:I updated my system%252C and now I only see a black screen/social.png">
<meta property="article:section" content="dev">
<meta property="article:published_time" content="2021-12-22T17:30:00+05:30">
<meta property="article:modified_time" content="2021-12-22T17:30:00+05:30">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:site content="@pranshugaba">
<meta name=twitter:title content="I broke my Arch System">
<meta name=twitter:description content="I updated my Arch system, and all I would get is a black screen. I fixed it by rebuilding some AUR packages.">
<link rel=icon type=image/png href=/icon.png>
<link rel=stylesheet href=https://pranshugaba.com/css/main.723119ee5ccbb04681afe49e193a3c7dd50952fbaff357bdc3eb468db809a92c.css>
<title>
I broke my Arch System |
Pranshu Gaba
</title>
</head>
<body><header>
<a class=skip__nav href=#content>skip to main content</a>
<nav class=header>
<div class=header__logo>
<a href=/>Pranshu Gaba</a>
</div>
<div class=header__sections>
<a href=/about/>about</a>
<a href=/contact/>contact</a>
<a href=/now/>now</a>
<a href=/explore/>explore</a>
</div>
</nav>
</header>
<main class=dev id=content>
<header class=page__header>
<div class=page__date>
Wednesday, 22 December 2021
</div>
<h1 class=page__title>I broke my Arch System</h1>
<p class=page__subtitle>I updated my system, and now I only see a black screen</p>
</header>
<div class=page__content>
<p>Today, I updated my system running Arch Linux after a month using <code>pacman -Syu</code>. I rebooted my system to find a black screen instead of the SDDM login screen. I tried pressing the Caps Lock key, and I could see its light toggle. This meant that things were not that bad.</p>
<p>I changed the tty using <kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>F2</kbd> and logged in to my system. I tried downgrading the Linux kernel but that didn&rsquo;t help. I tried disabling the optimus-manager and sddm services, and tried starting the Xorg server using <code>startx</code> or <code>xinit</code>. None of this worked.</p>
<p>The fix was to rebuild the optimus-manager package. It turns out that Python was upgraded from 3.9 to 3.10 in the update, and this broke Optimus Manager. I rebuilt it, and I am able to access the login screen and my window manager again.</p>
<p>I could see that some of my AUR packages were still built using older versions of Python using this command:</p>
<div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pacman -Qoq /usr/lib/python3.9
</code></pre></div><p>I rebuilt all those packages to use the latest Python version.
I also finally installed <code>yay</code> to manage all my AUR packages.</p>
</div>
<div class=page__navtags>
<ul class=page__tags>
<li><a href=https://pranshugaba.com/tags/linux/>linux</a></li>
<li><a href=https://pranshugaba.com/tags/arch-linux/>arch linux</a></li>
<li><a href=https://pranshugaba.com/tags/pacman/>pacman</a></li>
</ul>
<div class=page__all>
<a href=/dev>all dev</a>
</div>
</div>
<div class=page__nav>
<div class=page__prevnext>
<div class=page__prev>
<div>&lt;-</div>
<a href=https://pranshugaba.com/links/advent-puzzles-2021/>
Advent Puzzles 2021
</a>
</div>
<div class=page__next>
<div>-></div>
<a href=https://pranshugaba.com/minis/3/>
#3: <em>
I started playing Dark Souls today....
</em>
</a>
</div>
</div>
</div>
</main><footer class=footer>
<div class=footer__copyright>
<a href=/licence/> Â© 2022 Pranshu Gaba </a>
</div>
<div class=footer__links>
<button id=dark-mode-toggle role=button tabindex=0>toggle lights</button>
</div>
</footer>
</body>
<script>let darkMode=localStorage.getItem('darkMode');const darkModeToggle=document.querySelector('#dark-mode-toggle'),enableDarkMode=()=>{document.body.classList.add('dark-mode'),localStorage.setItem('darkMode','enabled')},disableDarkMode=()=>{document.body.classList.remove('dark-mode'),localStorage.setItem('darkMode','disabled')};darkMode==='enabled'?enableDarkMode():darkMode==='disabled'?disableDarkMode():window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches&&enableDarkMode(),darkModeToggle.addEventListener('click',()=>{darkMode=localStorage.getItem('darkMode'),darkMode!=='enabled'?enableDarkMode():disableDarkMode()})</script>
</html>