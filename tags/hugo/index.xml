<?xml version="1.0" encoding="utf-8" standalone="yes"?><?xml-stylesheet href="/pretty-feed-v3.xsl" type="text/xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>hugo by Pranshu Gaba</title><link>https://pranshugaba.com/tags/hugo/</link><description/><generator>Hugo -- gohugo.io</generator><language>en</language><managingEditor>pranshu@pranshugaba.com (Pranshu Gaba)</managingEditor><webMaster>pranshu@pranshugaba.com (Pranshu Gaba)</webMaster><copyright>This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.</copyright><lastBuildDate>Sat, 30 Apr 2022 00:45:32 +0530</lastBuildDate><image><url>https://pranshugaba.com/tags/hugo/icon.png</url></image><atom:link href="https://pranshugaba.com/tags/hugo/index.xml" rel="self" type="application/rss+xml"/><item><title>Hugo Colour Shortcode</title><link>https://pranshugaba.com/dev/hugo-colour-shortcode/</link><pubDate>Wed, 21 Jul 2021 17:30:00 +0530</pubDate><guid>https://pranshugaba.com/dev/hugo-colour-shortcode/</guid><description>
<![CDATA[<p>I was writing a <a href="https://pranshugaba.com/dev/moving-back-to-hugo/">post about my new Hugo website</a>, and I wanted to describe the colours used on this site. I wrote the names of the colours, but names do not convey the colour very well. Can you imagine what the colour #714825 looks like? What about rgb(0, 100, 255)?</p>
<p>I thought it would be great if the reader could also see a preview of the colours. I could add images of the colours that I am describing, but that is a lot of work and not very flexible.  This is what led me to write this Hugo shortcode. I followed the <a href="https://gohugo.io/templates/shortcode-templates/" target="_blank" rel="noopener">Hugo docs on shortcodes</a> for reference.</p>
<h2 id="usage">Usage</h2>
<p>The following code in markdown
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>This is a colour shortcode {{&lt; colour &#34;#ff0000&#34; &gt;}}.</span></span></code></pre></div></p>
<p>renders as</p>
<p>This is a colour shortcode 
<code style="background-color: #ff0000;"> 
<span style="color: #ff0000;filter:  grayscale(1) invert(1) contrast(100);">#ff0000</span></code>.</p>
<p>This works with all valid CSS colour syntaxes, not just hexcodes. Here are some examples:</p>
<ul>
<li>
<code style="background-color: #714285;"> 
<span style="color: #714285;filter:  grayscale(1) invert(1) contrast(100);">#714285</span></code></li>
<li>
<code style="background-color: rgb(0, 100, 255);"> 
<span style="color: rgb(0, 100, 255);filter:  grayscale(1) invert(1) contrast(100);">rgb(0, 100, 255)</span></code></li>
<li>
<code style="background-color: hsl(37.1, 100%, 91.8%);"> 
<span style="color: hsl(37.1, 100%, 91.8%);filter:  grayscale(1) invert(1) contrast(100);">hsl(37.1, 100%, 91.8%)</span></code></li>
<li>
<code style="background-color: aquamarine;"> 
<span style="color: aquamarine;filter:  grayscale(1) invert(1) contrast(100);">aquamarine</span></code></li>
</ul>
<h2 id="shortcode">Shortcode</h2>
<p>I created a file named <code>colour.html</code> in <code>layouts/shortcodes</code>, and added the following code in it. We can now access this code in any markdown file using the <code>colour</code> shortcode.</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ <span style="color:#ef6155">$</span><span style="color:#06b6ef">colour</span> <span style="color:#5bc4bf">:=</span> .<span style="color:#06b6ef">Get</span> <span style="color:#f99b15">0</span> | <span style="color:#06b6ef">safeCSS</span> }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#06b6ef">code</span> <span style="color:#06b6ef">style</span>=<span style="color:#48b685">&#34;background-color: {{ $colour }};&#34;</span>&gt; 
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#06b6ef">span</span> <span style="color:#06b6ef">style</span>=<span style="color:#48b685">&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#48b685">      color: {{ $colour }};
</span></span></span><span style="display:flex;"><span><span style="color:#48b685">      filter:  grayscale(1) invert(1) contrast(100);
</span></span></span><span style="display:flex;"><span><span style="color:#48b685">      &#34;</span>&gt;
</span></span><span style="display:flex;"><span>      {{ <span style="color:#ef6155">$</span><span style="color:#06b6ef">colour</span> }}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#5bc4bf">/</span><span style="color:#06b6ef">span</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#5bc4bf">/</span><span style="color:#06b6ef">code</span>&gt;
</span></span></code></pre></div><p>The shortcode takes in an argument: <code>$colour</code>.  We use this parameter to set the text in the <code>code</code> tag, and we set both the text colour and the background colour to <code>$colour</code>. We then invert the colour of the text and increase the contrast to make the name of the colour legible. The end result is that the text is white if colour is bright, and black if it is dark.</p>



<aside class="admonition note">
    <div class="admonition__title">
        Note
    </div>
	<div class="admonition__content">
        <p>While the shortcode syntax is specific to Hugo, most templating languages have a way to pass in variables. It should be possible to adapt this code for the templating language that you use.</p>

    </div>
</aside>
<h2 id="limitations">Limitations</h2>
<p>This works well in most cases, but it has some limitations.</p>
<ul>
<li>
<p>When the luminosity of the colour is close to 50% and the saturation is low, neither black nor white text has enough contrast with the chosen colour, and the text is not as legible. Example: 
<code style="background-color: hsl(180, 10%,  50%);"> 
<span style="color: hsl(180, 10%,  50%);filter:  grayscale(1) invert(1) contrast(100);">hsl(180, 10%,  50%)</span></code></p>
</li>
<li>
<p>The text is not legible when the colour is transparent. This is because the text is transparent too, and does not have enough contrast with the background. Example: 
<code style="background-color: rgba(120, 0, 240, 0.3);"> 
<span style="color: rgba(120, 0, 240, 0.3);filter:  grayscale(1) invert(1) contrast(100);">rgba(120, 0, 240, 0.3)</span></code></p>
</li>
</ul>
<h2 id="alternate-style">Alternate style</h2>
<p>Here&rsquo;s another style of previewing colours.</p>
<ul>
<li>
<code>
<span
    style="display: inline-block;
    width: 1.6ch;
    height: 1.6ch;
    border-radius: 0.1rem;
    background-color: #714285;
    margin-right:5px;"
    ></span>#714285</code>
</li>
<li>
<code>
<span
    style="display: inline-block;
    width: 1.6ch;
    height: 1.6ch;
    border-radius: 0.1rem;
    background-color: rgb(0, 100, 255);
    margin-right:5px;"
    ></span>rgb(0, 100, 255)</code>
</li>
<li>
<code>
<span
    style="display: inline-block;
    width: 1.6ch;
    height: 1.6ch;
    border-radius: 0.1rem;
    background-color: hsl(37.1, 100%, 91.8%);
    margin-right:5px;"
    ></span>hsl(37.1, 100%, 91.8%)</code>
</li>
<li>
<code>
<span
    style="display: inline-block;
    width: 1.6ch;
    height: 1.6ch;
    border-radius: 0.1rem;
    background-color: aquamarine;
    margin-right:5px;"
    ></span>aquamarine</code>
</li>
</ul>
<p>The text is always legible, but the colour preview is smaller.</p>
<p>Here&rsquo;s the shortcode for this style:</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ <span style="color:#ef6155">$</span><span style="color:#06b6ef">colour</span> <span style="color:#5bc4bf">:=</span> .<span style="color:#06b6ef">Get</span> <span style="color:#f99b15">0</span> | <span style="color:#06b6ef">safeCSS</span> }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#06b6ef">code</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#06b6ef">span</span> <span style="color:#06b6ef">style</span>=<span style="color:#48b685">&#34;display: inline-block;
</span></span></span><span style="display:flex;"><span><span style="color:#48b685">    width: 1.6ch;
</span></span></span><span style="display:flex;"><span><span style="color:#48b685">    height: 1.6ch;
</span></span></span><span style="display:flex;"><span><span style="color:#48b685">    border-radius: 0.1rem;
</span></span></span><span style="display:flex;"><span><span style="color:#48b685">    background-color: {{ $colour }};
</span></span></span><span style="display:flex;"><span><span style="color:#48b685">    margin-right:5px;&#34;</span>&gt;&lt;<span style="color:#5bc4bf">/</span><span style="color:#06b6ef">span</span>&gt;
</span></span><span style="display:flex;"><span>    {{ <span style="color:#ef6155">$</span><span style="color:#06b6ef">colour</span> }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#5bc4bf">/</span><span style="color:#06b6ef">code</span>&gt;
</span></span></code></pre></div><hr>
<p><a href="https://pranshugaba.com/contact/">Let me know</a> if you liked this shortcode, and which style you liked more. Feel free to use this code in your site and share your implementation with me. If you have any suggestions to improve this code, share those with me too.</p>
]]></description></item><item><title>...and Back to Hugo Again</title><link>https://pranshugaba.com/dev/moving-back-to-hugo/</link><pubDate>Tue, 06 Jul 2021 15:16:36 +0530</pubDate><guid>https://pranshugaba.com/dev/moving-back-to-hugo/</guid><description>
<![CDATA[<p>Not more than 2 months ago, I had migrated my site from Hugo to Nuxt, and I had <a href="https://pranshugaba.com/dev/moving-from-hugo-to-nuxt/">written a post</a> describing why I chose to do so. Well, that didn&rsquo;t last long, and now I am back to using Hugo.</p>
<h2 id="my-short-experience-with-nuxt">My (short) experience with Nuxt</h2>
<p>I had added many features to my site in Nuxt. I was happy with my progress; my site looked so pretty and colourful!</p>

<figure >
    
    
    
    
    
    <picture>
        
        <source srcset="https://pranshugaba.com/dev/moving-back-to-hugo/nuxt-website-dark.webp" media="(prefers-color-scheme: dark)">
        
        <img src="https://pranshugaba.com/dev/moving-back-to-hugo/nuxt-website-light.webp" alt="This is how my Nuxt website looked  like.">
    </picture>
    
    
    <figcaption>
        
        
            This is how my Nuxt website looked  like.
            
            
            
        
    </figcaption>
    
</figure>

<p>I used <a href="https://tailwindcss.com/" target="_blank" rel="noopener">TailwindCSS</a> to style my site, and it was amazing not having to think of class names anymore. It was easy to prototype and iterate over different styles quickly, even if it meant having a dirty HTML code overriden with dozens of classes.</p>
<p>Another thing I loved about Nuxt is that it is based on Vue, and therefore I could make reusable components for different parts of my site. Almost everything on my site was a component: header, footer, links, figures, headings, author bios, pagination, even the dark mode switch. To make my website, I had to design the components and then assemble them together, just like Lego! It was so much fun.</p>

<figure >
    
    
    
    
    
    <picture>
        
        <source srcset="https://pranshugaba.com/dev/moving-back-to-hugo/components-dark.webp" media="(prefers-color-scheme: dark)">
        
        <img src="https://pranshugaba.com/dev/moving-back-to-hugo/components-light.webp" alt="Some of the components in my Nuxt website">
    </picture>
    
    
    <figcaption>
        
        
            Some of the components in my Nuxt website
            
            
            
        
    </figcaption>
    
</figure>

<p>Once I finished adding features to my site, I wrote a tutorial on game development: <a href="https://pranshugaba.com/dev/building-x-and-o-using-godot/">Building an X and O game in Godot</a>. It was a long article &ndash; about 7000 words long &ndash; and it was filled with notes, figures, and codefences. With a post this big, I was beginning to face performance issues.</p>
<p>The site was taking too long to build. The initial build of the site would take more than 17 seconds to complete, and the server would take up about 1.5 GB of memory. I found out that one of the main offenders was Tailwind. I switched Tailwind to JIT mode, and the startup build time reduced to 6 seconds. But this increased again as I added custom styling.</p>
<p>I could live with the long build times, but I also noticed issues on my website, especially on mobile. I had a dark theme toggler in my website, and toggling the theme on mobile was taking a good second or two, and was causing frame drops.</p>
<p>Another issue I was facing was related to prefetching. As I have mentioned before, Nuxt prefetches links, so when you click on an link, the page appears to load almost instantly. While the page was loading very quickly, it did not load completely rendered. A lot of content loaded after a while as the components hydrated. This was causing layout shifts, which was annoying, distracting, and terrible experience for the user. I would rather the page take half a second to load, but it loads completely without any layout shift.</p>
<p>Yet another issue with using generators such as Next and Nuxt is that the first time a user visits my site, they have to download a big Javascript bundle. This greatly increases the total blocking time and the time to Largest Contentful Paint during a user&rsquo;s first visit, which is arguably the most important visit.</p>
<p>I was missing the simplicity and speed of Hugo, so I decided to give Hugo another go.</p>
<h2 id="my-new-site-built-with-hugo">My new site built with Hugo</h2>
<p>I had a not-so-great experience with a readymade theme before, so this time I decided to write my own theme. I decided I would keep my site simple so it is easy to maintain and not too distracting to look at.</p>
<p>My site uses only two colours: 
<code style="background-color: papayawhip;"> 
<span style="color: papayawhip;filter:  grayscale(1) invert(1) contrast(100);">papayawhip</span></code> and 
<code style="background-color: #121212;"> 
<span style="color: #121212;filter:  grayscale(1) invert(1) contrast(100);">#121212</span></code>. Every element has one of these two colors. This makes the colour part of the CSS very simple, and I was also able to write the dark theme in no time.</p>
<p>I love this simple design; I think it looks crisp and clear with no distractions. The content is legible with enough contrast between the foreground and the background, much like a road sign.</p>

<figure class="small">
    
    
    
    
    
    <picture>
        
        <img src="https://pranshugaba.com/dev/moving-back-to-hugo/road-sign.webp" >
    </picture>
    
    
</figure>

<p>I also love the creative decisions that I have to take when I have just two colours at my disposal. There are no box-shadows, no transparency, and no colour (except for images) on this site. Any component on the site must use exactly one of the two colours in the palette.</p>
<p>I am no longer using Tailwind to style the site; I am using <a href="https://sass-lang.com/" target="_blank" rel="noopener">Sass</a> now. I do have to think of class names for each class, but using the BEM methodology helps. While Tailwind has most of the CSS features, it still lacks many newer CSS properties. I can now use all CSS properties now such as underline-offset, smooth scrolling, scroll-padding-top, etc.</p>
<p>In Sass, we can split our CSS into different modules to make it more organised and easy to maintain. We can combine the modules using the <code>@use</code> directive, or the deprecated <code>@import</code> directive. I wanted to use  <code>@use</code> instead of  <code>@import</code>,  but it is only available in Dart Sass, which Hugo does not support  as of writing.  So, what I do is I write in Dart Sass and live compile it. Hugo only gets the compiled CSS file.</p>
<p>While I can no longer use Vue components, Hugo has templates, partials, and shortcodes that help me avoid repeating code.</p>
<p>Performance wise, this site now scores perfectly on Lighthouse tests. It builds in ~150ms, which is really impressive.</p>
<h2 id="conclusions">Conclusions</h2>
<p>While Nuxt is powerful, it is too powerful for a simple site like mine which has just text and images. I feel Hugo is more than enough for my needs.</p>
<p>I like my stack now. It is boring, and that&rsquo;s a good thing. I have redesigned my site twice in the last three months, and have spent hardly any time writing content. I am done adding new features to this site now.  I might polish up the code and publish it as a theme on <a href="https://themes.gohugo.io/" target="_blank" rel="noopener">Hugo themes</a>. Everything has been setup for me to write content and post it. I just need to start writing now.</p>
<p>I have moved my Nuxt website to the nuxt subdomain, and it will remain there for posterity. I won&rsquo;t be making any changes to it. I will publish new  posts on my new website only.</p>
]]></description></item><item><title>Moving my site from Hugo to Nuxt.js...</title><link>https://pranshugaba.com/dev/moving-from-hugo-to-nuxt/</link><pubDate>Tue, 11 May 2021 19:30:00 +0530</pubDate><guid>https://pranshugaba.com/dev/moving-from-hugo-to-nuxt/</guid><description><![CDATA[


<aside class="admonition note">
    <div class="admonition__title">
        Note
    </div>
	<div class="admonition__content">
        <p>This post was published on an older version of my site. I have rewritten my site, and many things have changed since then. This site is no longer built using Nuxt.js, but the points that I make were valid at the time of writing this post.</p>

    </div>
</aside>
<p>This site is built using Nuxt.js, and I have had a great time making it.
The previous version of this website (now retired to hugo.pranshugaba.com) was built using Hugo. In this post, I outline how I made the switch from Hugo to Nuxt. I hope this helps anyone who is looking to choose a static site generator for their website.</p>
<p>Hugo is quick to install and very easy to get started with, which is what drew me to it in the first place. There are a variety of user-submitted themes available, and out of those, the Academic theme was my favourite.</p>
<p>The theme has a lot of useful features, but I found it to be quite opinionated. I found several websites using this theme, and they all looked more or less the same. If I wanted to modify the theme, I had to override the theme templates, and in some cases rewrite them completely. This would often cause unintended effects. It was difficult to maintain the site, and even more so to add new features. I always felt that I had hacked it together and it could break with an update to Hugo or the theme.</p>
<p>I wanted to create a theme from scratch, and I realized that there is much more scope for customisation if I use frameworks such as React or Vue.</p>
<p>There are a lot of static site generators based on these frameworks. I tried out Gridsome, Next.js, and Nuxt.js.</p>
<h3 id="gridsome">Gridsome</h3>
<p>I tried <a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsome</a> first, which is based on Vue.js. I had only used plain HTML and CSS before, but I could pickup Vue easily because each Vue file is divided into <code>template</code>, <code>script</code>, and <code>style</code> tags corresponding to HTML, JS, and CSS respectively.</p>
<p>I enjoyed learning Gridsome, and I loved the site it generated too. Gridsome prefetches links, so links are super quick to open. It also automatically optimises image loading by showing a blurred placeholder in the place of the image until it loads.</p>
<p>I could access data from my markdown files using GraphQL. I had never used GraphQL before, and I enjoyed learning it.</p>
<h3 id="nextjs">Next.js</h3>
<p>Next, I tried out <a href="https://nextjs.org/" target="_blank" rel="noopener">Next.js</a> which uses React. I was surprised to see how easily I could pickup React since I knew Vue. Next.js has a great tutorial that teaches you Next.js by building a basic blog site. While I loved the tutorial, I didn&rsquo;t like the fact that I had to write so much code just to read my markdown files.</p>
<p>There were many features that I wanted to add to my website such as sitemap and PWA. I found many plugins for these on the <a href="https://github.com/unicodeveloper/awesome-nextjs" target="_blank" rel="noopener">awesome-nextjs</a> page on GitHub. However, most of them were third-party, and you never know when they stop being supported.</p>
<h3 id="nuxtjs">Nuxt.js</h3>
<p>While browsing through the awesome-nextjs page, I discovered the <a href="https://github.com/nuxt-community/awesome-nuxt" target="_blank" rel="noopener">awesome-nuxtjs</a> page. I found that Nuxt has first-party modules for almost every feature that I would like in my site. I immediately switched to <a href="https://nuxtjs.org/" target="_blank" rel="noopener">Nuxt.js</a>.
I found that Nuxt is in active development, the modules are great, and the documentation is detailed and well-written.</p>
<p>My favourite module is the <a href="https://content.nuxtjs.org/" target="_blank" rel="noopener">Nuxt Content</a> module. It makes it very easy to access markdown files and their content. I also loved the <a href="https://sitemap.nuxtjs.org/" target="_blank" rel="noopener">Sitemap</a>, <a href="https://pwa.nuxtjs.org/" target="_blank" rel="noopener">PWA</a>, and <a href="https://color-mode.nuxtjs.org/" target="_blank" rel="noopener">Color Mode</a> modules.</p>
<p>Like Gridsome and Next, Nuxt prefetches the outgoing links on any page, so the links begin to load even before you click on them. This makes the site feel fast and snappy!</p>
<p>I did the theming and styling from scratch and am adding features gradually. I was able to match all the features offered in Hugo, and then some.</p>
<h4 id="math-equations">Math equations</h4>
<p>Install <code>remark-math</code> and <code>rehype-katex</code> modules and we are good to go!</p>
<p>I can have inline math $e^{i\pi} + 1 = 0$, and displaystyle math too!</p>
<p>$$
\sum_{k=1}^{\infty} \frac{1}{k^2} = \frac{\pi^2}{6}
$$</p>
<h4 id="code-blocks">Code blocks</h4>
<p>Prism.js comes pre-installed with Nuxt. You can install themes and plugins too.</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#815ba4">fn</span> <span style="color:#06b6ef">main</span>() {
</span></span><span style="display:flex;"><span>    println!(<span style="color:#48b685">&#34;Hello, world!&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>You can check out the code on <a href="https://github.com/pranshugaba/nuxt-website" target="_blank" rel="noopener">GitHub</a>  to see how I made my website using Nuxt.</p>
]]></description></item></channel></rss>