(function(b,a){typeof exports=='object'&&typeof module!='undefined'?a(exports):typeof define=='function'&&define.amd?define(['exports'],a):a(b.L={})})(this,function(a){'use strict';var ec="1.6.0",aT,cW,eb,F,aU,cF,bq,cC,ea,x,aE,c_,R,Y,cw,by,bE,d_,bL,aN,ag,a_,bN,ay,aB,dZ,cS,bT,bS,bR,bc,bZ,cb,ch,bJ,bI,cl,z,af,dY,dW,W,I,G,cv,dV,X,ab,cy,aV,aP,dU,bu,bt,bs,br,aj,cH,aX,aY,ak,bW,au,cU,aD,aA,bx,az,ba,bC,dE,B,bM,dC,bf,dB,ca,f,E,aI,cf,dx,bK,dv,cj,dt,bH,ds,M,dr,cp,cq,bD,aa,b$,dl,dk,bo,bm,dj,di,cO,dg,C,al,de,ac,dc,ae,at,cY,be,V,aS,bg,P,ad,T,bF,du,aK,dw,cg,cc,O,ap,dD,ai,dF,cD,ax,am,cN,K,cL,aF,dS,aO,aH,cs,co,b_,cn,cz,cB,cR,cX,ed;function j(d){var b,a,e,c;for(a=1,e=arguments.length;a<e;a++){c=arguments[a];for(b in c)d[b]=c[b]}return d}aT=Object.create||function(){function a(){}return function(b){return a.prototype=b,new a}}();function k(a,d){var b=Array.prototype.slice,c;return a.bind?a.bind.apply(a,b.call(arguments,1)):(c=b.call(arguments,2),function(){return a.apply(d,c.length?c.concat(b.call(arguments)):arguments)})}cW=0;function h(a){return a._leaflet_id=a._leaflet_id||++cW,a._leaflet_id}function cV(g,f,e){var b,a,c,d;return d=function(){b=!1,a&&(c.apply(e,a),a=!1)},c=function(){b?a=arguments:(g.apply(e,arguments),setTimeout(d,f),b=!0)},c}function ar(a,d,f){var e=d[1],b=d[0],c=e-b;return a===e&&f?a:((a-b)%c+c)%c+b}function r(){return!1}function J(c,a){var b=Math.pow(10,a===void 0?6:a);return Math.round(c*b)/b}function bh(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,'')}function ao(a){return bh(a).split(/\s+/)}function l(a,b){Object.prototype.hasOwnProperty.call(a,'options')||(a.options=a.options?aT(a.options):{});for(var c in b)a.options[c]=b[c];return a.options}function cZ(b,c,e){var d=[],a;for(a in b)d.push(encodeURIComponent(e?a.toUpperCase():a)+'='+encodeURIComponent(b[a]));return(!c||c.indexOf('?')===-1?'?':'&')+d.join('&')}eb=/\{ *([\w_-]+) *\}/g;function cQ(b,a){return b.replace(eb,function(c,d){var b=a[d];if(b===void 0)throw new Error('No value provided for variable '+c);return typeof b=='function'&&(b=b(a)),b})}F=Array.isArray||function(a){return Object.prototype.toString.call(a)==='[object Array]'};function cP(b,c){for(var a=0;a<b.length;a++)if(b[a]===c)return a;return-1}aU='data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';function bi(a){return window['webkit'+a]||window['moz'+a]||window['ms'+a]}cF=0;function cE(c){var a=+new Date,b=Math.max(0,16-(a-cF));return cF=a+b,window.setTimeout(c,b)}bq=window.requestAnimationFrame||bi('RequestAnimationFrame')||cE,cC=window.cancelAnimationFrame||bi('CancelAnimationFrame')||bi('CancelRequestAnimationFrame')||function(a){window.clearTimeout(a)};function u(a,b,c){if(c&&bq===cE)a.call(b);else return bq.call(window,k(a,b))}function w(a){a&&cC.call(window,a)}ea={extend:j,create:aT,bind:k,lastId:cW,stamp:h,throttle:cV,wrapNum:ar,falseFn:r,formatNum:J,trim:bh,splitWords:ao,setOptions:l,getParamString:cZ,template:cQ,isArray:F,indexOf:cP,emptyImageUrl:aU,requestFn:bq,cancelFn:cC,requestAnimFrame:u,cancelAnimFrame:w};function S(){}S.extend=function(a){var c=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},e=c.__super__=this.prototype,b=aT(e),d;b.constructor=c,c.prototype=b;for(d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=='prototype'&&d!=='__super__'&&(c[d]=this[d]);return a.statics&&(j(c,a.statics),delete a.statics),a.includes&&(d$(a.includes),j.apply(null,[b].concat(a.includes)),delete a.includes),b.options&&(a.options=j(aT(b.options),a.options)),j(b,a),b._initHooks=[],b.callInitHooks=function(){if(this._initHooksCalled)return;e.callInitHooks&&e.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,c=b._initHooks.length;a<c;a++)b._initHooks[a].call(this)},c},S.include=function(a){return j(this.prototype,a),this},S.mergeOptions=function(a){return j(this.prototype.options,a),this},S.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c=typeof a=='function'?a:function(){this[a].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function d$(a){if(typeof L=='undefined'||!L||!L.Mixin)return;a=F(a)?a:[a];for(var b=0;b<a.length;b++)a[b]===L.Mixin.Events&&console.warn('Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.',(new Error).stack)}x={on:function(a,d,f){var c,b,e;if(typeof a=='object')for(c in a)this._on(c,a[c],d);else{a=ao(a);for(b=0,e=a.length;b<e;b++)this._on(a[b],d,f)}return this},off:function(a,d,f){var c,b,e;if(a)if(typeof a=='object')for(c in a)this._off(c,a[c],d);else{a=ao(a);for(b=0,e=a.length;b<e;b++)this._off(a[b],d,f)}else delete this._events;return this},_on:function(g,e,d){var b,f,c,a,h;this._events=this._events||{},b=this._events[g],b||(b=[],this._events[g]=b),d===this&&(d=void 0),f={fn:e,ctx:d},c=b;for(a=0,h=c.length;a<h;a++)if(c[a].fn===e&&c[a].ctx===d)return;c.push(f)},_off:function(d,g,e){var a,b,c,f;if(!this._events)return;if(a=this._events[d],!a)return;if(!g){for(b=0,c=a.length;b<c;b++)a[b].fn=r;delete this._events[d];return}if(e===this&&(e=void 0),a)for(b=0,c=a.length;b<c;b++){if(f=a[b],f.ctx!==e)continue;if(f.fn===g){f.fn=r,this._firingCount&&(this._events[d]=a=a.slice()),a.splice(b,1);return}}},fire:function(c,d,g){var e,a,b,h,f;if(!this.listens(c,g))return this;if(e=j({},d,{type:c,target:this,sourceTarget:d&&d.sourceTarget||this}),this._events)if(a=this._events[c],a){this._firingCount=this._firingCount+1||1;for(b=0,h=a.length;b<h;b++)f=a[b],f.fn.call(f.ctx||this,e);this._firingCount--}return g&&this._propagateEvent(e),this},listens:function(a,b){var c=this._events&&this._events[a],d;if(c&&c.length)return!0;if(b)for(d in this._eventParents)if(this._eventParents[d].listens(a,b))return!0;return!1},once:function(a,c,b){var d,e;if(typeof a=='object'){for(d in a)this.once(d,a[d],c);return this}return e=k(function(){this.off(a,c,b).off(a,e,b)},this),this.on(a,c,b).on(a,e,b)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[h(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[h(a)],this},_propagateEvent:function(a){for(var b in this._eventParents)this._eventParents[b].fire(a.type,j({layer:a.target,propagatedFrom:a.target},a),!0)}},x.addEventListener=x.on,x.removeEventListener=x.clearAllEventListeners=x.off,x.addOneTimeEventListener=x.once,x.fireEvent=x.fire,x.hasEventListeners=x.listens,aE=S.extend(x);function b(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b}c_=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)},b.prototype={clone:function(){return new b(this.x,this.y)},add:function(a){return this.clone()._add(e(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(e(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new b(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new b(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=c_(this.x),this.y=c_(this.y),this},distanceTo:function(a){a=e(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=e(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=e(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return'Point('+J(this.x)+', '+J(this.y)+')'}};function e(a,c,d){return a instanceof b?a:F(a)?new b(a[0],a[1]):a===void 0||a===null?a:typeof a=='object'&&'x'in a&&'y'in a?new b(a.x,a.y):new b(a,c,d)}function m(b,d){var c,a,e;if(!b)return;c=d?[b,d]:b;for(a=0,e=c.length;a<e;a++)this.extend(c[a])}m.prototype={extend:function(a){return a=e(a),!this.min&&!this.max?(this.min=a.clone(),this.max=a.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)),this},getCenter:function(a){return new b((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new b(this.min.x,this.max.y)},getTopRight:function(){return new b(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var c,d;return typeof a[0]=='number'||a instanceof b?a=e(a):a=D(a),a instanceof m?(c=a.min,d=a.max):c=d=a,c.x>=this.min.x&&d.x<=this.max.x&&c.y>=this.min.y&&d.y<=this.max.y},intersects:function(a){a=D(a);var b=this.min,c=this.max,d=a.min,e=a.max,f=e.x>=b.x&&d.x<=c.x,g=e.y>=b.y&&d.y<=c.y;return f&&g},overlaps:function(a){a=D(a);var b=this.min,c=this.max,d=a.min,e=a.max,f=e.x>b.x&&d.x<c.x,g=e.y>b.y&&d.y<c.y;return f&&g},isValid:function(){return!!(this.min&&this.max)}};function D(a,b){return!a||a instanceof m?a:new m(a,b)}function v(b,d){var c,a,e;if(!b)return;c=d?[b,d]:b;for(a=0,e=c.length;a<e;a++)this.extend(c[a])}v.prototype={extend:function(a){var d=this._southWest,e=this._northEast,b,c;if(a instanceof i)b=a,c=a;else if(a instanceof v){if(b=a._southWest,c=a._northEast,!b||!c)return this}else return a?this.extend(p(a)||t(a)):this;return!d&&!e?(this._southWest=new i(b.lat,b.lng),this._northEast=new i(c.lat,c.lng)):(d.lat=Math.min(b.lat,d.lat),d.lng=Math.min(b.lng,d.lng),e.lat=Math.max(c.lat,e.lat),e.lng=Math.max(c.lng,e.lng)),this},pad:function(c){var a=this._southWest,b=this._northEast,d=Math.abs(a.lat-b.lat)*c,e=Math.abs(a.lng-b.lng)*c;return new v(new i(a.lat-d,a.lng-e),new i(b.lat+d,b.lng+e))},getCenter:function(){return new i((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new i(this.getNorth(),this.getWest())},getSouthEast:function(){return new i(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=='number'||a instanceof i||'lat'in a?a=p(a):a=t(a);var d=this._southWest,e=this._northEast,b,c;return a instanceof v?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=d.lat&&c.lat<=e.lat&&b.lng>=d.lng&&c.lng<=e.lng},intersects:function(a){a=t(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),f=e.lat>=b.lat&&d.lat<=c.lat,g=e.lng>=b.lng&&d.lng<=c.lng;return f&&g},overlaps:function(a){a=t(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),f=e.lat>b.lat&&d.lat<c.lat,g=e.lng>b.lng&&d.lng<c.lng;return f&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(',')},equals:function(a,b){return!!a&&(a=t(a),this._southWest.equals(a.getSouthWest(),b)&&this._northEast.equals(a.getNorthEast(),b))},isValid:function(){return!!(this._southWest&&this._northEast)}};function t(a,b){return a instanceof v?a:new v(a,b)}function i(a,b,c){if(isNaN(a)||isNaN(b))throw new Error('Invalid LatLng object: ('+a+', '+b+')');this.lat=+a,this.lng=+b,c!==void 0&&(this.alt=+c)}i.prototype={equals:function(a,b){if(!a)return!1;a=p(a);var c=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return c<=(b===void 0?1e-9:b)},toString:function(a){return'LatLng('+J(this.lat,a)+', '+J(this.lng,a)+')'},distanceTo:function(a){return Y.distance(this,p(a))},wrap:function(){return Y.wrapLatLng(this)},toBounds:function(c){var a=180*c/40075017,b=a/Math.cos(Math.PI/180*this.lat);return t([this.lat-a,this.lng-b],[this.lat+a,this.lng+b])},clone:function(){return new i(this.lat,this.lng,this.alt)}};function p(a,b,c){return a instanceof i?a:F(a)&&typeof a[0]!='object'?a.length===3?new i(a[0],a[1],a[2]):a.length===2?new i(a[0],a[1]):null:a===void 0||a===null?a:typeof a=='object'&&'lat'in a?new i(a.lat,'lng'in a?a.lng:a.lon,a.alt):b===void 0?null:new i(a,b,c)}R={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var a=this.projection.bounds,b=this.scale(c),d=this.transformation.transform(a.min,b),e=this.transformation.transform(a.max,b);return new m(d,e)},infinite:!1,wrapLatLng:function(a){var b=this.wrapLng?ar(a.lng,this.wrapLng,!0):a.lng,c=this.wrapLat?ar(a.lat,this.wrapLat,!0):a.lat,d=a.alt;return new i(c,b,d)},wrapLatLngBounds:function(a){var b=a.getCenter(),e=this.wrapLatLng(b),c=b.lat-e.lat,d=b.lng-e.lng,f,g,h,j;return c===0&&d===0?a:(f=a.getSouthWest(),g=a.getNorthEast(),h=new i(f.lat-c,f.lng-d),j=new i(g.lat-c,g.lng-d),new v(h,j))}},Y=j({},R,{wrapLng:[-180,180],R:6371e3,distance:function(b,c){var a=Math.PI/180,g=b.lat*a,h=c.lat*a,d=Math.sin((c.lat-b.lat)*a/2),e=Math.sin((c.lng-b.lng)*a/2),f=d*d+Math.cos(g)*Math.cos(h)*e*e,i=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f));return this.R*i}}),cw=6378137,by={R:cw,MAX_LATITUDE:85.0511287798,project:function(a){var c=Math.PI/180,d=this.MAX_LATITUDE,f=Math.max(Math.min(d,a.lat),-d),e=Math.sin(f*c);return new b(this.R*a.lng*c,this.R*Math.log((1+e)/(1-e))/2)},unproject:function(a){var b=180/Math.PI;return new i((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*b,a.x*b/this.R)},bounds:function(){var a=cw*Math.PI;return new m([-a,-a],[a,a])}()};function bB(a,b,c,d){if(F(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=b,this._c=c,this._d=d}bB.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(c,a){return a=a||1,new b((c.x/a-this._b)/this._a,(c.y/a-this._d)/this._c)}};function aG(a,b,c,d){return new bB(a,b,c,d)}bE=j({},Y,{code:'EPSG:3857',projection:by,transformation:function(){var a=.5/(Math.PI*by.R);return aG(a,.5,-a,.5)}()}),d_=j({},bE,{code:'EPSG:900913'});function ci(a){return document.createElementNS('http://www.w3.org/2000/svg',a)}function ce(f,i){var d='',b,a,g,h,c,e;for(b=0,g=f.length;b<g;b++){c=f[b];for(a=0,h=c.length;a<h;a++)e=c[a],d+=(a?'L':'M')+e.x+' '+e.y;d+=i?aV?'z':'x':''}return d||'M0 0'}bL=document.documentElement.style,aN='ActiveXObject'in window,ag=aN&&!document.addEventListener,a_='msLaunchUri'in navigator&&!('documentMode'in document),bN=H('webkit'),ay=H('android'),aB=H('android 2')||H('android 3'),dZ=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),cS=ay&&H('Google')&&dZ<537&&!('AudioNode'in window),bT=!!window.opera,bS=!a_&&H('chrome'),bR=H('gecko')&&!bN&&!bT&&!aN,bc=!bS&&H('safari'),bZ=H('phantom'),cb='OTransition'in bL,ch=navigator.platform.indexOf('Win')===0,bJ=aN&&'transition'in bL,bI='WebKitCSSMatrix'in window&&'m11'in new window.WebKitCSSMatrix&&!aB,cl='MozPerspective'in bL,z=!window.L_DISABLE_3D&&(bJ||bI||cl)&&!cb&&!bZ,af=typeof orientation!='undefined'||H('mobile'),dY=af&&bN,dW=af&&bI,W=!window.PointerEvent&&window.MSPointerEvent,I=!!(window.PointerEvent||W),G=!window.L_NO_TOUCH&&(I||'ontouchstart'in window||window.DocumentTouch&&document instanceof window.DocumentTouch),cv=af&&bT,dV=af&&bR,X=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ab=function(){var a=!1,b;try{b=Object.defineProperty({},'passive',{get:function(){a=!0}}),window.addEventListener('testPassiveEventSupport',r,b),window.removeEventListener('testPassiveEventSupport',r,b)}catch(a){}return a}(),cy=function(){return!!document.createElement('canvas').getContext}(),aV=!!(document.createElementNS&&ci('svg').createSVGRect),aP=!aV&&function(){var b,a;try{return b=document.createElement('div'),b.innerHTML='<v:shape adj="1"/>',a=b.firstChild,a.style.behavior='url(#default#VML)',a&&typeof a.adj=='object'}catch(a){return!1}}();function H(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}dU={ie:aN,ielt9:ag,edge:a_,webkit:bN,android:ay,android23:aB,androidStock:cS,opera:bT,chrome:bS,gecko:bR,safari:bc,phantom:bZ,opera12:cb,win:ch,ie3d:bJ,webkit3d:bI,gecko3d:cl,any3d:z,mobile:af,mobileWebkit:dY,mobileWebkit3d:dW,msPointer:W,pointer:I,touch:G,mobileOpera:cv,mobileGecko:dV,retina:X,passiveEvents:ab,canvas:cy,svg:aV,vml:aP},bu=W?'MSPointerDown':'pointerdown',bt=W?'MSPointerMove':'pointermove',bs=W?'MSPointerUp':'pointerup',br=W?'MSPointerCancel':'pointercancel',aj={},cH=!1;function dT(a,b,c,d){return b==='touchstart'?dQ(a,c,d):b==='touchmove'?dM(a,c,d):b==='touchend'&&dL(a,c,d),this}function dR(a,b,d){var c=a['_leaflet_'+b+d];return b==='touchstart'?a.removeEventListener(bu,c,!1):b==='touchmove'?a.removeEventListener(bt,c,!1):b==='touchend'&&(a.removeEventListener(bs,c,!1),a.removeEventListener(br,c,!1)),this}function dQ(a,c,d){var b=k(function(a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&A(a),bj(a,c)});a['_leaflet_touchstart'+d]=b,a.addEventListener(bu,b,!1),cH||(document.addEventListener(bu,dP,!0),document.addEventListener(bt,dO,!0),document.addEventListener(bs,cM,!0),document.addEventListener(br,cM,!0),cH=!0)}function dP(a){aj[a.pointerId]=a}function dO(a){aj[a.pointerId]&&(aj[a.pointerId]=a)}function cM(a){delete aj[a.pointerId]}function bj(a,b){a.touches=[];for(var c in aj)a.touches.push(aj[c]);a.changedTouches=[a],b(a)}function dM(a,c,d){var b=function(a){if(a.pointerType===(a.MSPOINTER_TYPE_MOUSE||'mouse')&&a.buttons===0)return;bj(a,c)};a['_leaflet_touchmove'+d]=b,a.addEventListener(bt,b,!1)}function dL(a,c,d){var b=function(a){bj(a,c)};a['_leaflet_touchend'+d]=b,a.addEventListener(bs,b,!1),a.addEventListener(br,b,!1)}aX=W?'MSPointerDown':I?'pointerdown':'touchstart',aY=W?'MSPointerUp':I?'pointerup':'touchend',ak='_leaflet_';function dK(b,c,d){var e,a,f=!1,i=250;function g(b){if(I){{if(!b.isPrimary)return;if(b.pointerType==='mouse')return}}else if(b.touches.length>1)return;var c=Date.now(),d=c-(e||c);a=b.touches?b.touches[0]:b,f=d>0&&d<=i,e=c}function h(h){if(f&&!a.cancelBubble){if(I){if(h.pointerType==='mouse')return;var g={},b,d;for(d in a)b=a[d],g[d]=b&&b.bind?b.bind(a):b;a=g}a.type='dblclick',a.button=0,c(a),e=null}}return b[ak+aX+d]=g,b[ak+aY+d]=h,b[ak+'dblclick'+d]=c,b.addEventListener(aX,g,!!ab&&{passive:!1}),b.addEventListener(aY,h,!!ab&&{passive:!1}),b.addEventListener('dblclick',c,!1),this}function dI(a,b){var c=a[ak+aX+b],d=a[ak+aY+b],e=a[ak+'dblclick'+b];return a.removeEventListener(aX,c,!!ab&&{passive:!1}),a.removeEventListener(aY,d,!!ab&&{passive:!1}),a.removeEventListener('dblclick',e,!1),this}bW=aL(['transform','webkitTransform','OTransform','MozTransform','msTransform']),au=aL(['webkitTransition','transition','OTransition','MozTransition','msTransition']),cU=au==='webkitTransition'||au==='OTransition'?au+'End':'transitionend';function cr(a){return typeof a=='string'?document.getElementById(a):a}function aC(b,c){var a=b.style[c]||b.currentStyle&&b.currentStyle[c],d;return(!a||a==='auto')&&document.defaultView&&(d=document.defaultView.getComputedStyle(b,null),a=d?d[c]:null),a==='auto'?null:a}function g(c,d,b){var a=document.createElement(c);return a.className=d||'',b&&b.appendChild(a),a}function n(a){var b=a.parentNode;b&&b.removeChild(a)}function aW(a){while(a.firstChild)a.removeChild(a.firstChild)}function aq(a){var b=a.parentNode;b&&b.lastChild!==a&&b.appendChild(a)}function ah(b){var a=b.parentNode;a&&a.firstChild!==b&&a.insertBefore(b,a.firstChild)}function bk(a,b){if(a.classList!==void 0)return a.classList.contains(b);var c=aQ(a);return c.length>0&&new RegExp('(^|\\s)'+b+'(\\s|$)').test(c)}function c(a,c){var d,b,f,e;if(a.classList!==void 0){d=ao(c);for(b=0,f=d.length;b<f;b++)a.classList.add(d[b])}else bk(a,c)||(e=aQ(a),bn(a,(e?e+' ':'')+c))}function o(a,b){a.classList!==void 0?a.classList.remove(b):bn(a,bh((' '+aQ(a)+' ').replace(' '+b+' ',' ')))}function bn(a,b){a.className.baseVal===void 0?a.className=b:a.className.baseVal=b}function aQ(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function y(a,b){'opacity'in a.style?a.style.opacity=b:'filter'in a.style&&dG(a,b)}function dG(c,a){var b=!1,d='DXImageTransform.Microsoft.Alpha';try{b=c.filters.item(d)}catch(b){if(a===1)return}a=Math.round(a*100),b?(b.Enabled=a!==100,b.Opacity=a):c.style.filter+=' progid:'+d+'(opacity='+a+')'}function aL(b){for(var c=document.documentElement.style,a=0;a<b.length;a++)if(b[a]in c)return b[a];return!1}function Z(d,e,c){var a=e||new b(0,0);d.style[bW]=(bJ?'translate('+a.x+'px,'+a.y+'px)':'translate3d('+a.x+'px,'+a.y+'px,0)')+(c?' scale('+c+')':'')}function s(a,b){a._leaflet_pos=b,z?Z(a,b):(a.style.left=b.x+'px',a.style.top=b.y+'px')}function U(a){return a._leaflet_pos||new b(0,0)}'onselectstart'in document?(aD=function(){d(window,'selectstart',A)},aA=function(){q(window,'selectstart',A)}):(az=aL(['userSelect','WebkitUserSelect','OUserSelect','MozUserSelect','msUserSelect']),aD=function(){if(az){var a=document.documentElement.style;bx=a[az],a[az]='none'}},aA=function(){az&&(document.documentElement.style[az]=bx,bx=void 0)});function bz(){d(window,'dragstart',A)}function bA(){q(window,'dragstart',A)}function bV(a){while(a.tabIndex===-1)a=a.parentNode;if(!a.style)return;bb(),ba=a,bC=a.style.outline,a.style.outline='none',d(window,'keydown',bb)}function bb(){if(!ba)return;ba.style.outline=bC,ba=void 0,bC=void 0,q(window,'keydown',bb)}function cm(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body)return a}function bG(a){var b=a.getBoundingClientRect();return{x:b.width/a.offsetWidth||1,y:b.height/a.offsetHeight||1,boundingClientRect:b}}dE={TRANSFORM:bW,TRANSITION:au,TRANSITION_END:cU,get:cr,getStyle:aC,create:g,remove:n,empty:aW,toFront:aq,toBack:ah,hasClass:bk,addClass:c,removeClass:o,setClass:bn,getClass:aQ,setOpacity:y,testProp:aL,setTransform:Z,setPosition:s,getPosition:U,disableTextSelection:aD,enableTextSelection:aA,disableImageDrag:bz,enableImageDrag:bA,preventOutline:bV,restoreOutline:bb,getSizedParentNode:cm,getScale:bG};function d(d,a,e,g){var c,b,f;if(typeof a=='object')for(c in a)aJ(d,c,a[c],e);else{a=ao(a);for(b=0,f=a.length;b<f;b++)aJ(d,a[b],e,g)}return this}B='_leaflet_events';function q(b,a,f,h){var d,c,g,e;if(typeof a=='object')for(d in a)bO(b,d,a[d],f);else if(a){a=ao(a);for(c=0,g=a.length;c<g;c++)bO(b,a[c],f,h)}else{for(e in b[B])bO(b,e,b[B][e]);delete b[B]}return this}function cd(){if(I)return!(a_||bc)}bM={mouseenter:'mouseover',mouseleave:'mouseout',wheel:!('onwheel'in window)&&'mousewheel'};function aJ(a,b,f,e){var d=b+h(f)+(e?'_'+h(e):''),c,g;if(a[B]&&a[B][d])return this;c=function(b){return f.call(e||a,b||window.event)},g=c,I&&b.indexOf('touch')===0?dT(a,b,c,d):G&&b==='dblclick'&&!cd()?dK(a,c,d):'addEventListener'in a?b==='touchstart'||b==='touchmove'||b==='wheel'||b==='mousewheel'?a.addEventListener(bM[b]||b,c,!!ab&&{passive:!1}):b==='mouseenter'||b==='mouseleave'?(c=function(b){b=b||window.event,a$(a,b)&&g(b)},a.addEventListener(bM[b],c,!1)):a.addEventListener(b,g,!1):'attachEvent'in a&&a.attachEvent('on'+b,c),a[B]=a[B]||{},a[B][d]=c}function bO(a,b,f,e){var c=b+h(f)+(e?'_'+h(e):''),d=a[B]&&a[B][c];if(!d)return this;I&&b.indexOf('touch')===0?dR(a,b,c):G&&b==='dblclick'&&!cd()?dI(a,c):'removeEventListener'in a?a.removeEventListener(bM[b]||b,d,!1):'detachEvent'in a&&a.detachEvent('on'+b,d),a[B][c]=null}function $(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,bP(a),this}function bQ(a){return aJ(a,'wheel',$),this}function aw(a){return d(a,'mousedown touchstart dblclick',$),aJ(a,'click',bU),this}function A(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function N(a){return A(a),$(a),this}function bY(a,c){if(!c)return new b(a.clientX,a.clientY);var d=bG(c),e=d.boundingClientRect;return new b((a.clientX-e.left)/d.x-c.clientLeft,(a.clientY-e.top)/d.y-c.clientTop)}dC=ch&&bS?2*window.devicePixelRatio:bR?window.devicePixelRatio:1;function bX(a){return a_?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/dC:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}bf={};function bU(a){bf[a.type]=!0}function bP(a){var b=bf[a.type];return bf[a.type]=!1,b}function a$(b,c){var a=c.relatedTarget;if(!a)return!0;try{while(a&&a!==b)a=a.parentNode}catch(a){return!1}return a!==b}dB={on:d,off:q,stopPropagation:$,disableScrollPropagation:bQ,disableClickPropagation:aw,preventDefault:A,stop:N,getMousePosition:bY,getWheelDelta:bX,fakeStop:bU,skipped:bP,isExternalTarget:a$,addListener:d,removeListener:q},ca=aE.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=U(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire('start'),this._animate()},stop:function(){if(!this._inProgress)return;this._step(!0),this._complete()},_animate:function(){this._animId=u(this._animate,this),this._step()},_step:function(c){var a=+new Date-this._startTime,b=this._duration*1e3;a<b?this._runFrame(this._easeOut(a/b),c):(this._runFrame(1),this._complete())},_runFrame:function(b,c){var a=this._startPos.add(this._offset.multiplyBy(b));c&&a._round(),s(this._el,a),this.fire('step')},_complete:function(){w(this._animId),this._inProgress=!1,this.fire('end')},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),f=aE.extend({options:{crs:bE,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(b,a){a=l(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(b),this._initLayout(),this._onResize=k(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(p(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=au&&z&&!cv&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),d(this._proxy,cU,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,b,a){if(b=b===void 0?this._zoom:this._limitZoom(b),c=this._limitCenter(p(c),b,this.options.maxBounds),a=a||{},this._stop(),this._loaded&&!a.reset&&a!==!0){a.animate!==void 0&&(a.zoom=j({animate:a.animate},a.zoom),a.pan=j({animate:a.animate,duration:a.duration},a.pan));var d=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,b,a.zoom):this._tryAnimatedPan(c,a.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(c,b),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=a,this)},zoomIn:function(a,b){return a=a||(z?this.options.zoomDelta:1),this.setZoom(this._zoom+a,b)},zoomOut:function(a,b){return a=a||(z?this.options.zoomDelta:1),this.setZoom(this._zoom-a,b)},setZoomAround:function(a,c,e){var f=this.getZoomScale(c),d=this.getSize().divideBy(2),g=a instanceof b?a:this.latLngToContainerPoint(a),h=g.subtract(d).multiplyBy(1-1/f),i=this.containerPointToLatLng(d.add(h));return this.setView(i,c,{zoom:e})},_getBoundsCenterZoom:function(b,c){var d,f,a,g,h,i,j;return c=c||{},b=b.getBounds?b.getBounds():t(b),d=e(c.paddingTopLeft||c.padding||[0,0]),f=e(c.paddingBottomRight||c.padding||[0,0]),a=this.getBoundsZoom(b,!1,d.add(f)),a=typeof c.maxZoom=='number'?Math.min(c.maxZoom,a):a,a===1/0?{center:b.getCenter(),zoom:a}:(g=f.subtract(d).divideBy(2),h=this.project(b.getSouthWest(),a),i=this.project(b.getNorthEast(),a),j=this.unproject(h.add(i).divideBy(2).add(g),a),{center:j,zoom:a})},fitBounds:function(a,b){if(a=t(a),!a.isValid())throw new Error('Bounds are not valid.');var c=this._getBoundsCenterZoom(a,b);return this.setView(c.center,c.zoom,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a,b){if(a=e(a).round(),b=b||{},!a.x&&!a.y)return this.fire('moveend');if(b.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ca,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire('movestart'),b.animate!==!1){c(this._mapPane,'leaflet-pan-anim');var d=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,d,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire('move').fire('moveend');return this},flyTo:function(i,e,b){var k,m,n,h,a,j,f,d,g,c,t,o,r;if(b=b||{},b.animate===!1||!z)return this.setView(i,e,b);this._stop(),k=this.project(this.getCenter()),m=this.project(i),n=this.getSize(),h=this._zoom,i=p(i),e=e===void 0?h:e,a=Math.max(n.x,n.y),j=a*this.getZoomScale(h,e),f=m.distanceTo(k)||1,d=1.42,g=d*d;function q(c){var e=c?-1:1,h=c?j:a,i=j*j-a*a+e*g*g*f*f,k=2*h*g*f,b=i/k,d=Math.sqrt(b*b+1)-b,l=d<1e-9?-18:Math.log(d);return l}function s(a){return(Math.exp(a)-Math.exp(-a))/2}function l(a){return(Math.exp(a)+Math.exp(-a))/2}function y(a){return s(a)/l(a)}c=q(0);function x(b){return a*(l(c)/l(c+d*b))}function w(b){return a*(l(c)*y(c+d*b)-s(c))/g}function A(a){return 1-Math.pow(1-a,1.5)}t=Date.now(),o=(q(1)-c)/d,r=b.duration?1e3*b.duration:1e3*o*.8;function v(){var b=(Date.now()-t)/r,c=A(b)*o;b<=1?(this._flyToFrame=u(v,this),this._move(this.unproject(k.add(m.subtract(k).multiplyBy(w(c)/f)),h),this.getScaleZoom(a/x(c),h),{flyTo:!0})):this._move(i,e)._moveEnd(!0)}return this._moveStart(!0,b.noMoveStart),v.call(this),this},flyToBounds:function(c,a){var b=this._getBoundsCenterZoom(c,a);return this.flyTo(b.center,b.zoom,a)},setMaxBounds:function(a){return a=t(a),!a.isValid()?(this.options.maxBounds=null,this.off('moveend',this._panInsideMaxBounds)):(this.options.maxBounds&&this.off('moveend',this._panInsideMaxBounds),this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on('moveend',this._panInsideMaxBounds))},setMinZoom:function(a){var b=this.options.minZoom;if(this.options.minZoom=a,this._loaded&&b!==a)if(this.fire('zoomlevelschange'),this.getZoom()<this.options.minZoom)return this.setZoom(a);return this},setMaxZoom:function(a){var b=this.options.maxZoom;if(this.options.maxZoom=a,this._loaded&&b!==a)if(this.fire('zoomlevelschange'),this.getZoom()>this.options.maxZoom)return this.setZoom(a);return this},panInsideBounds:function(c,d){this._enforcingBounds=!0;var a=this.getCenter(),b=this._limitCenter(a,this._zoom,t(c));return a.equals(b)||this.panTo(b,d),this._enforcingBounds=!1,this},panInside:function(m,c){var i,j,l,k,a,h,g,f,d,b;return c=c||{},i=e(c.paddingTopLeft||c.padding||[0,0]),j=e(c.paddingBottomRight||c.padding||[0,0]),l=this.getCenter(),k=this.project(l),a=this.project(m),h=this.getPixelBounds(),g=h.getSize().divideBy(2),f=D([h.min.add(i),h.max.subtract(j)]),f.contains(a)||(this._enforcingBounds=!0,d=k.subtract(a),b=e(a.x+d.x,a.y+d.y),(a.x<f.min.x||a.x>f.max.x)&&(b.x=k.x-d.x,d.x>0?b.x+=g.x-i.x:b.x-=g.x-j.x),(a.y<f.min.y||a.y>f.max.y)&&(b.y=k.y-d.y,d.y>0?b.y+=g.y-i.y:b.y-=g.y-j.y),this.panTo(this.unproject(b),c),this._enforcingBounds=!1),this},invalidateSize:function(a){var c,d,e,f,b;return this._loaded?(a=j({animate:!1,pan:!0},a===!0?{animate:!0}:a),c=this.getSize(),this._sizeChanged=!0,this._lastCenter=null,d=this.getSize(),e=c.divideBy(2).round(),f=d.divideBy(2).round(),b=e.subtract(f),!b.x&&!b.y)?this:(a.animate&&a.pan?this.panBy(b):(a.pan&&this._rawPanBy(b),this.fire('move'),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(k(this.fire,this,'moveend'),200)):this.fire('moveend')),this.fire('resize',{oldSize:c,newSize:d})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire('viewreset'),this._stop()},locate:function(a){if(a=this._locateOptions=j({timeout:1e4,watch:!1},a),!('geolocation'in navigator))return this._handleGeolocationError({code:0,message:'Geolocation not supported.'}),this;var b=k(this._handleGeolocationResponse,this),c=k(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(b){var a=b.code,c=b.message||(a===1?'permission denied':a===2?'position unavailable':'timeout');this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire('locationerror',{code:a,message:'Geolocation error: '+c+'.'})},_handleGeolocationResponse:function(a){var h=a.coords.latitude,j=a.coords.longitude,c=new i(h,j),f=c.toBounds(a.coords.accuracy*2),d=this._locateOptions,g,e,b;d.setView&&(g=this.getBoundsZoom(f),this.setView(c,d.maxZoom?Math.min(g,d.maxZoom):g)),e={latlng:c,bounds:f,timestamp:a.timestamp};for(b in a.coords)typeof a.coords[b]=='number'&&(e[b]=a.coords[b]);this.fire('locationfound',e)},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.off('moveend',this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error('Map container is being reused by another instance');try{delete this._container._leaflet_id,delete this._containerId}catch(a){this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),n(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(w(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire('unload');var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)n(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,c){var d='leaflet-pane'+(a?' leaflet-'+a.replace('Pane','')+'-pane':''),b=g('div',d,c||this._mapPane);return a&&(this._panes[a]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new v(b,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,i,d){c=t(c),d=e(d||[0,0]);var a=this.getZoom()||0,n=this.getMinZoom(),m=this.getMaxZoom(),l=c.getNorthWest(),k=c.getSouthEast(),j=this.getSize().subtract(d),h=D(this.project(k,a),this.project(l,a)).getSize(),b=z?this.options.zoomSnap:1,g=j.x/h.x,f=j.y/h.y,o=i?Math.max(g,f):Math.min(g,f);return a=this.getScaleZoom(o,a),b&&(a=Math.round(a/(b/100))*(b/100),a=i?Math.ceil(a/b)*b:Math.floor(a/b)*b),Math.max(n,Math.min(m,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new b(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(b,c){var a=this._getTopLeftPoint(b,c);return new m(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=='string'?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,a){var b=this.options.crs;return a=a===void 0?this._zoom:a,b.scale(c)/b.scale(a)},getScaleZoom:function(d,a){var b=this.options.crs,c;return a=a===void 0?this._zoom:a,c=b.zoom(d*b.scale(a)),isNaN(c)?1/0:c},project:function(b,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(p(b),a)},unproject:function(b,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(e(b),a)},layerPointToLatLng:function(a){var b=e(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(p(a))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(p(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(t(a))},distance:function(a,b){return this.options.crs.distance(p(a),p(b))},containerPointToLayerPoint:function(a){return e(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return e(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(e(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(p(a)))},mouseEventToContainerPoint:function(a){return bY(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(b){var a=this._container=cr(b);if(!a)throw new Error('Map container not found.');if(a._leaflet_id)throw new Error('Map container is already initialized.');d(a,'scroll',this._onScroll,this),this._containerId=h(a)},_initLayout:function(){var a=this._container,b;this._fadeAnimated=this.options.fadeAnimation&&z,c(a,'leaflet-container'+(G?' leaflet-touch':'')+(X?' leaflet-retina':'')+(ag?' leaflet-oldie':'')+(bc?' leaflet-safari':'')+(this._fadeAnimated?' leaflet-fade-anim':'')),b=aC(a,'position'),b!=='absolute'&&b!=='relative'&&b!=='fixed'&&(a.style.position='relative'),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane('mapPane',this._container),s(this._mapPane,new b(0,0)),this.createPane('tilePane'),this.createPane('shadowPane'),this.createPane('overlayPane'),this.createPane('markerPane'),this.createPane('tooltipPane'),this.createPane('popupPane'),this.options.markerZoomAnimation||(c(a.markerPane,'leaflet-zoom-hide'),c(a.shadowPane,'leaflet-zoom-hide'))},_resetView:function(e,a){var d,c;s(this._mapPane,new b(0,0)),d=!this._loaded,this._loaded=!0,a=this._limitZoom(a),this.fire('viewprereset'),c=this._zoom!==a,this._moveStart(c,!1)._move(e,a)._moveEnd(c),this.fire('viewreset'),d&&this.fire('load')},_moveStart:function(a,b){return a&&this.fire('zoomstart'),b||this.fire('movestart'),this},_move:function(c,a,b){a===void 0&&(a=this._zoom);var d=this._zoom!==a;return this._zoom=a,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),(d||b&&b.pinch)&&this.fire('zoom',b),this.fire('move',b)},_moveEnd:function(a){return a&&this.fire('zoomend'),this.fire('moveend')},_stop:function(){return w(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){s(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error('Set map center and zoom first.')},_initEvents:function(a){this._targets={},this._targets[h(this._container)]=this;var b=a?q:d;b(this._container,'click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup',this._handleDOMEvent,this),this.options.trackResize&&b(window,'resize',this._onResize,this),z&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,'moveend',this._onMoveEnd)},_onResize:function(){w(this._resizeRequest),this._resizeRequest=u(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,d){for(var e=[],b,f=d==='mouseout'||d==='mouseover',a=c.target||c.srcElement,g=!1;a;){if(b=this._targets[h(a)],b&&(d==='click'||d==='preclick')&&!c._simulated&&this._draggableMoved(b)){g=!0;break}if(b&&b.listens(d,!0)){if(f&&!a$(a,c))break;if(e.push(b),f)break}if(a===this._container)break;a=a.parentNode}return!e.length&&!g&&!f&&a$(a,c)&&(e=[this]),e},_handleDOMEvent:function(a){if(!this._loaded||bP(a))return;var b=a.type;(b==='mousedown'||b==='keypress'||b==='keyup'||b==='keydown')&&bV(a.target||a.srcElement),this._fireDOMEvent(a,b)},_mouseEvents:['click','dblclick','mouseover','mouseout','contextmenu'],_fireDOMEvent:function(a,e,b){var g,d,c,h,f;if(a.type==='click'&&(g=j({},a),g.type='preclick',this._fireDOMEvent(g,g.type,b)),a._stopped)return;if(b=(b||[]).concat(this._findEventTargets(a,e)),!b.length)return;d=b[0],e==='contextmenu'&&d.listens(e,!0)&&A(a),c={originalEvent:a},a.type!=='keypress'&&a.type!=='keydown'&&a.type!=='keyup'&&(h=d.getLatLng&&(!d._radius||d._radius<=10),c.containerPoint=h?this.latLngToContainerPoint(d.getLatLng()):this.mouseEventToContainerPoint(a),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=h?d.getLatLng():this.layerPointToLatLng(c.layerPoint));for(f=0;f<b.length;f++)if(b[f].fire(e,c,!0),c.originalEvent._stopped||b[f].options.bubblingMouseEvents===!1&&cP(this._mouseEvents,e)!==-1)return},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,b=this._handlers.length;a<b;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,{target:this}):this.on('load',a,b),this},_getMapPanePos:function(){return U(this._mapPane)||new b(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,b){var c=a&&b!==void 0?this._getNewPixelOrigin(a,b):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(b,a,c){var d=this._getNewPixelOrigin(c,a);return this.project(b,a)._subtract(d)},_latLngBoundsToNewLayerBounds:function(b,a,d){var c=this._getNewPixelOrigin(d,a);return D([this.project(b.getSouthWest(),a)._subtract(c),this.project(b.getNorthWest(),a)._subtract(c),this.project(b.getSouthEast(),a)._subtract(c),this.project(b.getNorthEast(),a)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,d){if(!d)return a;var c=this.project(a,b),e=this.getSize().divideBy(2),g=new m(c.subtract(e),c.add(e)),f=this._getBoundsOffset(g,d,b);return f.round().equals([0,0])?a:this.unproject(c.add(f),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),d=new m(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,c,d){var e=D(this.project(c.getNorthEast(),d),this.project(c.getSouthWest(),d)),f=e.min.subtract(a.min),g=e.max.subtract(a.max),h=this._rebound(f.x,-g.x),i=this._rebound(f.y,-g.y);return new b(h,i)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var c=this.getMinZoom(),d=this.getMaxZoom(),b=z?this.options.zoomSnap:1;return b&&(a=Math.round(a/b)*b),Math.max(c,Math.min(d,a))},_onPanTransitionStep:function(){this.fire('move')},_onPanTransitionEnd:function(){o(this._mapPane,'leaflet-pan-anim'),this.fire('moveend')},_tryAnimatedPan:function(c,a){var b=this._getCenterOffset(c)._trunc();return!((a&&a.animate)!==!0&&!this.getSize().contains(b))&&(this.panBy(b,a),!0)},_createAnimProxy:function(){var a=this._proxy=g('div','leaflet-proxy leaflet-zoom-animated');this._panes.mapPane.appendChild(a),this.on('zoomanim',function(a){var b=bW,c=this._proxy.style[b];Z(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),c===this._proxy.style[b]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on('load moveend',this._animMoveEnd,this),this._on('unload',this._destroyAnimProxy,this)},_destroyAnimProxy:function(){n(this._proxy),this.off('load moveend',this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var b=this.getCenter(),a=this.getZoom();Z(this._proxy,this.project(b,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf('transform')>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName('leaflet-zoom-animated').length},_tryAnimatedZoom:function(c,b,a){if(this._animatingZoom)return!0;if(a=a||{},!this._zoomAnimated||a.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),e=this._getCenterOffset(c)._divideBy(1-1/d);return!(a.animate!==!0&&!this.getSize().contains(e))&&(u(function(){this._moveStart(!0,!1)._animateZoom(c,b,!0)},this),!0)},_animateZoom:function(a,b,d,e){if(!this._mapPane)return;d&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=b,c(this._mapPane,'leaflet-zoom-anim')),this.fire('zoomanim',{center:a,zoom:b,noUpdate:e}),setTimeout(k(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){if(!this._animatingZoom)return;this._mapPane&&o(this._mapPane,'leaflet-zoom-anim'),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),u(function(){this._moveEnd(!0)},this)}});function dz(a,b){return new f(a,b)}E=S.extend({options:{position:'topright'},initialize:function(a){l(this,a)},getPosition:function(){return this.options.position},setPosition:function(b){var a=this._map;return a&&a.removeControl(this),this.options.position=b,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var b=this._container=this.onAdd(a),e=this.getPosition(),d=a._controlCorners[e];return c(b,'leaflet-control'),e.indexOf('bottom')!==-1?d.insertBefore(b,d.firstChild):d.appendChild(b),this._map.on('unload',this.remove,this),this},remove:function(){return this._map?(n(this._container),this.onRemove&&this.onRemove(this._map),this._map.off('unload',this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),aI=function(a){return new E(a)},f.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var c=this._controlCorners={},b='leaflet-',d=this._controlContainer=g('div',b+'control-container',this._container);function a(a,e){var f=b+a+' '+b+e;c[a+e]=g('div',f,d)}a('top','left'),a('top','right'),a('bottom','left'),a('bottom','right')},_clearControlPos:function(){for(var a in this._controlCorners)n(this._controlCorners[a]);n(this._controlContainer),delete this._controlCorners,delete this._controlContainer}}),cf=E.extend({options:{collapsed:!0,position:'topright',autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,d,a,b){return a<b?-1:b<a?1:0}},initialize:function(b,c,d){l(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var a in b)this._addLayer(b[a],a);for(a in c)this._addLayer(c[a],a,!0)},onAdd:function(b){this._initLayout(),this._update(),this._map=b,b.on('zoomend',this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on('add remove',this._onLayerChange,this);return this._container},addTo:function(a){return E.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off('zoomend',this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off('add remove',this._onLayerChange,this)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._map?this._update():this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._map?this._update():this},removeLayer:function(a){a.off('add remove',this._onLayerChange,this);var b=this._getLayer(h(a));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){c(this._container,'leaflet-control-layers-expanded'),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(c(this._section,'leaflet-control-layers-scrollbar'),this._section.style.height=a+'px'):o(this._section,'leaflet-control-layers-scrollbar'),this._checkDisabledLayers(),this},collapse:function(){return o(this._container,'leaflet-control-layers-expanded'),this},_initLayout:function(){var a='leaflet-control-layers',b=this._container=g('div',a),f=this.options.collapsed,e,c;b.setAttribute('aria-haspopup',!0),aw(b),bQ(b),e=this._section=g('section',a+'-list'),f&&(this._map.on('click',this.collapse,this),ay||d(b,{mouseenter:this.expand,mouseleave:this.collapse},this)),c=this._layersLink=g('a',a+'-toggle',b),c.href='#',c.title='Layers',G?(d(c,'click',N),d(c,'click',this.expand,this)):d(c,'focus',this.expand,this),f||this.expand(),this._baseLayersList=g('div',a+'-base',e),this._separator=g('div',a+'-separator',e),this._overlaysList=g('div',a+'-overlays',e),b.appendChild(e)},_getLayer:function(b){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&h(this._layers[a].layer)===b)return this._layers[a]},_addLayer:function(a,b,c){this._map&&a.on('add remove',this._onLayerChange,this),this._layers.push({layer:a,name:b,overlay:c}),this.options.sortLayers&&this._layers.sort(k(function(a,b){return this.options.sortFunction(a.layer,b.layer,a.name,b.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;aW(this._baseLayersList),aW(this._overlaysList),this._layerControlInputs=[];var a,d,c,b,e=0;for(c=0;c<this._layers.length;c++)b=this._layers[c],this._addItem(b),d=d||b.overlay,a=a||!b.overlay,e+=b.overlay?0:1;return this.options.hideSingleBase&&(a=a&&e>1,this._baseLayersList.style.display=a?'':'none'),this._separator.style.display=d&&a?'':'none',this},_onLayerChange:function(a){var b,c;this._handlingClick||this._update(),b=this._getLayer(h(a.target)),c=b.overlay?a.type==='add'?'overlayadd':'overlayremove':a.type==='add'?'baselayerchange':null,c&&this._map.fire(c,b)},_createRadioElement:function(b,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+b+'"'+(c?' checked="checked"':'')+'/>',a=document.createElement('div');return a.innerHTML=d,a.firstChild},_addItem:function(b){var c=document.createElement('label'),f=this._map.hasLayer(b.layer),a,g,e,i;return b.overlay?(a=document.createElement('input'),a.type='checkbox',a.className='leaflet-control-layers-selector',a.defaultChecked=f):a=this._createRadioElement('leaflet-base-layers_'+h(this),f),this._layerControlInputs.push(a),a.layerId=h(b.layer),d(a,'click',this._onInputClick,this),g=document.createElement('span'),g.innerHTML=' '+b.name,e=document.createElement('div'),c.appendChild(e),e.appendChild(a),e.appendChild(g),i=b.overlay?this._overlaysList:this._baseLayersList,i.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){var f=this._layerControlInputs,c=[],d=[],b,e,a;this._handlingClick=!0;for(a=f.length-1;a>=0;a--)b=f[a],e=this._getLayer(b.layerId).layer,b.checked?c.push(e):b.checked||d.push(e);for(a=0;a<d.length;a++)this._map.hasLayer(d[a])&&this._map.removeLayer(d[a]);for(a=0;a<c.length;a++)this._map.hasLayer(c[a])||this._map.addLayer(c[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var d=this._layerControlInputs,c=d.length-1,a,e=this._map.getZoom(),b;c>=0;c--)b=d[c],a=this._getLayer(b.layerId).layer,b.disabled=a.options.minZoom!==void 0&&e<a.options.minZoom||a.options.maxZoom!==void 0&&e>a.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),dx=function(a,b,c){return new cf(a,b,c)},bK=E.extend({options:{position:'topleft',zoomInText:'+',zoomInTitle:'Zoom in',zoomOutText:'&#x2212;',zoomOutTitle:'Zoom out'},onAdd:function(d){var b='leaflet-control-zoom',c=g('div',b+' leaflet-bar'),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,b+'-in',c,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,b+'-out',c,this._zoomOut),this._updateDisabled(),d.on('zoomend zoomlevelschange',this._updateDisabled,this),c},onRemove:function(a){a.off('zoomend zoomlevelschange',this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(c,b,e,f,h){var a=g('a',e,f);return a.innerHTML=c,a.href='#',a.title=b,a.setAttribute('role','button'),a.setAttribute('aria-label',b),aw(a),d(a,'click',N),d(a,'click',h,this),d(a,'click',this._refocusOnMap,this),a},_updateDisabled:function(){var a=this._map,b='leaflet-disabled';o(this._zoomInButton,b),o(this._zoomOutButton,b),(this._disabled||a._zoom===a.getMinZoom())&&c(this._zoomOutButton,b),(this._disabled||a._zoom===a.getMaxZoom())&&c(this._zoomInButton,b)}}),f.mergeOptions({zoomControl:!0}),f.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new bK,this.addControl(this.zoomControl))}),dv=function(a){return new bK(a)},cj=E.extend({options:{position:'bottomleft',maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var b='leaflet-control-scale',c=g('div',b),d=this.options;return this._addScales(d,b+'-line',c),a.on(d.updateWhenIdle?'moveend':'move',this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?'moveend':'move',this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=g('div',b,c)),a.imperial&&(this._iScale=g('div',b,c))},_update:function(){var a=this._map,b=a.getSize().y/2,c=a.distance(a.containerPointToLatLng([0,b]),a.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(c)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(b){var a=this._getRoundNum(b),c=a<1e3?a+' m':a/1e3+' km';this._updateScale(this._mScale,c,a/b)},_updateImperial:function(e){var a=e*3.2808399,b,c,d;a>5280?(b=a/5280,c=this._getRoundNum(b),this._updateScale(this._iScale,c+' mi',c/b)):(d=this._getRoundNum(a),this._updateScale(this._iScale,d+' ft',d/a))},_updateScale:function(a,b,c){a.style.width=Math.round(this.options.maxWidth*c)+'px',a.innerHTML=b},_getRoundNum:function(b){var c=Math.pow(10,(Math.floor(b)+'').length-1),a=b/c;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:1,c*a}}),dt=function(a){return new cj(a)},bH=E.extend({options:{position:'bottomright',prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){l(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=g('div','leaflet-control-attribution'),aw(this._container);for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){var a,c,b;if(!this._map)return;a=[];for(c in this._attributions)this._attributions[c]&&a.push(c);b=[],this.options.prefix&&b.push(this.options.prefix),a.length&&b.push(a.join(', ')),this._container.innerHTML=b.join(' | ')}}),f.mergeOptions({attributionControl:!0}),f.addInitHook(function(){this.options.attributionControl&&(new bH).addTo(this)}),ds=function(a){return new bH(a)},E.Layers=cf,E.Zoom=bK,E.Scale=cj,E.Attribution=bH,aI.layers=dx,aI.zoom=dv,aI.scale=dt,aI.attribution=ds,M=S.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),M.addTo=function(a,b){return a.addHandler(b,this),this},dr={Events:x},cp=G?'touchstart mousedown':'mousedown',cq={mousedown:'mouseup',touchstart:'touchend',pointerdown:'touchend',MSPointerDown:'touchend'},bD={mousedown:'mousemove',touchstart:'touchmove',pointerdown:'touchmove',MSPointerDown:'touchmove'},aa=aE.extend({options:{clickTolerance:3},initialize:function(a,b,c,d){l(this,d),this._element=a,this._dragStartTarget=b||a,this._preventOutline=c},enable:function(){if(this._enabled)return;d(this._dragStartTarget,cp,this._onDown,this),this._enabled=!0},disable:function(){if(!this._enabled)return;aa._dragging===this&&this.finishDrag(),q(this._dragStartTarget,cp,this._onDown,this),this._enabled=!1,this._moved=!1},_onDown:function(a){if(a._simulated||!this._enabled)return;if(this._moved=!1,bk(this._element,'leaflet-zoom-anim'))return;if(aa._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)return;if(aa._dragging=this,this._preventOutline&&bV(this._element),bz(),aD(),this._moving)return;this.fire('down');var c=a.touches?a.touches[0]:a,e=cm(this._element);this._startPoint=new b(c.clientX,c.clientY),this._parentScale=bG(e),d(document,bD[a.type],this._onMove,this),d(document,cq[a.type],this._onUp,this)},_onMove:function(a){if(a._simulated||!this._enabled)return;if(a.touches&&a.touches.length>1){this._moved=!0;return}var e=a.touches&&a.touches.length===1?a.touches[0]:a,d=new b(e.clientX,e.clientY)._subtract(this._startPoint);if(!d.x&&!d.y)return;if(Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance)return;d.x/=this._parentScale.x,d.y/=this._parentScale.y,A(a),this._moved||(this.fire('dragstart'),this._moved=!0,this._startPos=U(this._element).subtract(d),c(document.body,'leaflet-dragging'),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),c(this._lastTarget,'leaflet-drag-target')),this._newPos=this._startPos.add(d),this._moving=!0,w(this._animRequest),this._lastEvent=a,this._animRequest=u(this._updatePosition,this,!0)},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire('predrag',a),s(this._element,this._newPos),this.fire('drag',a)},_onUp:function(a){if(a._simulated||!this._enabled)return;this.finishDrag()},finishDrag:function(){o(document.body,'leaflet-dragging'),this._lastTarget&&(o(this._lastTarget,'leaflet-drag-target'),this._lastTarget=null);for(var a in bD)q(document,bD[a],this._onMove,this),q(document,cq[a],this._onUp,this);bA(),aA(),this._moved&&this._moving&&(w(this._animRequest),this.fire('dragend',{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,aa._dragging=!1}});function ct(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=dn(a,c),a=dp(a,c),a}function cu(a,b,c){return Math.sqrt(av(a,b,c,!0))}function dq(a,b,c){return av(a,b,c)}function dp(d,f){var b=d.length,g=typeof Uint8Array!==void 0+''?Uint8Array:Array,c=new g(b),a,e;c[0]=c[b-1]=1,bw(d,c,f,0,b-1),e=[];for(a=0;a<b;a++)c[a]&&e.push(d[a]);return e}function bw(a,h,d,e,f){var g=0,c,b,i;for(b=e+1;b<=f-1;b++)i=av(a[b],a[e],a[f],!0),i>g&&(c=b,g=i);g>d&&(h[c]=1,bw(a,h,d,e,c),bw(a,h,d,c,f))}function dn(a,f){for(var c=[a[0]],b=1,d=0,e=a.length;b<e;b++)dm(a[b],a[d])>f&&(c.push(a[b]),d=b);return d<e-1&&c.push(a[e-1]),c}function cA(e,c,d,j,i){var b=j?b$:_(e,d),a=_(c,d),h,f,g;for(b$=a;!0;){if(!(b|a))return[e,c];if(b&a)return!1;h=b||a,f=aZ(e,c,h,d,i),g=_(f,d),h===b?(e=f,b=g):(c=f,a=g)}}function aZ(a,j,f,k,l){var g=j.x-a.x,h=j.y-a.y,e=k.min,i=k.max,c,d;return f&8?(c=a.x+g*(i.y-a.y)/h,d=i.y):f&4?(c=a.x+g*(e.y-a.y)/h,d=e.y):f&2?(c=i.x,d=a.y+h*(i.x-a.x)/g):f&1&&(c=e.x,d=a.y+h*(e.x-a.x)/g),new b(c,d,l)}function _(b,c){var a=0;return b.x<c.min.x?a|=1:b.x>c.max.x&&(a|=2),b.y<c.min.y?a|=4:b.y>c.max.y&&(a|=8),a}function dm(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d}function av(h,i,g,k){var d=i.x,e=i.y,a=g.x-d,c=g.y-e,j=a*a+c*c,f;return j>0&&(f=((h.x-d)*a+(h.y-e)*c)/j,f>1?(d=g.x,e=g.y):f>0&&(d+=a*f,e+=c*f)),a=h.x-d,c=h.y-e,k?a*a+c*c:new b(d,e)}function Q(a){return!F(a[0])||typeof a[0][0]!='object'&&typeof a[0][0]!='undefined'}function cG(a){return console.warn('Deprecated use of _flat, please use L.LineUtil.isFlat instead.'),Q(a)}dl={simplify:ct,pointToSegmentDistance:cu,closestPointOnSegment:dq,clipSegment:cA,_getEdgeIntersection:aZ,_getBitCode:_,_sqClosestPointOnSegment:av,isFlat:Q,_flat:cG};function cI(b,g,l){var e,m=[1,4,2,8],a,k,j,h,i,f,d,c;for(a=0,f=b.length;a<f;a++)b[a]._code=_(b[a],g);for(j=0;j<4;j++){d=m[j],e=[];for(a=0,f=b.length,k=f-1;a<f;k=a++)h=b[a],i=b[k],h._code&d?i._code&d||(c=aZ(i,h,d,g,l),c._code=_(c,g),e.push(c)):(i._code&d&&(c=aZ(i,h,d,g,l),c._code=_(c,g),e.push(c)),e.push(h));b=e}return b}dk={clipPolygon:cI},bo={project:function(a){return new b(a.lng,a.lat)},unproject:function(a){return new i(a.y,a.x)},bounds:new m([-180,-90],[180,90])},bm={R:6378137,R_MINOR:6356752.314245179,bounds:new m([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(d){var e=Math.PI/180,c=this.R,a=d.lat*e,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),h=g*Math.sin(a),i=Math.tan(Math.PI/4-a/2)/Math.pow((1-h)/(1+h),g/2);return a=-c*Math.log(Math.max(i,1e-10)),new b(d.lng*e*c,a)},unproject:function(h){for(var e=180/Math.PI,c=this.R,k=this.R_MINOR/c,f=Math.sqrt(1-k*k),g=Math.exp(-h.y/c),b=Math.PI/2-2*Math.atan(g),j=0,d=.1,a;j<15&&Math.abs(d)>1e-7;j++)a=f*Math.sin(b),a=Math.pow((1-a)/(1+a),f/2),d=Math.PI/2-2*Math.atan(g*a)-b,b+=d;return new i(b*e,h.x*e/c)}},dj={LonLat:bo,Mercator:bm,SphericalMercator:by},di=j({},Y,{code:'EPSG:3395',projection:bm,transformation:function(){var a=.5/(Math.PI*bm.R);return aG(a,.5,-a,.5)}()}),cO=j({},Y,{code:'EPSG:4326',projection:bo,transformation:aG(1/180,1,-1/180,.5)}),dg=j({},R,{projection:bo,transformation:aG(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,b){var c=b.lng-a.lng,d=b.lat-a.lat;return Math.sqrt(c*c+d*d)},infinite:!0}),R.Earth=Y,R.EPSG3395=di,R.EPSG3857=bE,R.EPSG900913=d_,R.EPSG4326=cO,R.Simple=dg,C=aE.extend({options:{pane:'overlayPane',attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[h(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[h(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var a=c.target,b;if(!a.hasLayer(this))return;this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents&&(b=this.getEvents(),a.on(b,this),this.once('remove',function(){a.off(b,this)},this)),this.onAdd(a),this.getAttribution&&a.attributionControl&&a.attributionControl.addAttribution(this.getAttribution()),this.fire('add'),a.fire('layeradd',{layer:this})}}),f.include({addLayer:function(a){if(!a._layerAdd)throw new Error('The provided object is not a Layer.');var b=h(a);return this._layers[b]?this:(this._layers[b]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var b=h(a);return this._layers[b]?(this._loaded&&a.onRemove(this),a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution()),delete this._layers[b],this._loaded&&(this.fire('layerremove',{layer:a}),a.fire('remove')),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return!!a&&h(a)in this._layers},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},_addLayers:function(a){a=a?F(a)?a:[a]:[];for(var b=0,c=a.length;b<c;b++)this.addLayer(a[b])},_addZoomLimit:function(a){(isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[h(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(b){var a=h(b);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,b=-(1/0),d=this._getZoomSpan(),e,c;for(e in this._zoomBoundLayers)c=this._zoomBoundLayers[e].options,a=c.minZoom===void 0?a:Math.min(a,c.minZoom),b=c.maxZoom===void 0?b:Math.max(b,c.maxZoom);this._layersMaxZoom=b===-(1/0)?void 0:b,this._layersMinZoom=a===1/0?void 0:a,d!==this._getZoomSpan()&&this.fire('zoomlevelschange'),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}}),al=C.extend({initialize:function(b,d){l(this,d),this._layers={};var a,c;if(b)for(a=0,c=b.length;a<c;a++)this.addLayer(b[a])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){if(!a)return!1;var b=typeof a=='number'?a:this.getLayerId(a);return b in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(b){var d=Array.prototype.slice.call(arguments,1),c,a;for(c in this._layers)a=this._layers[c],a[b]&&a[b].apply(a,d);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke('setZIndex',a)},getLayerId:function(a){return h(a)}}),de=function(a,b){return new al(a,b)},ac=al.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),al.prototype.addLayer.call(this,a),this.fire('layeradd',{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),al.prototype.removeLayer.call(this,a),this.fire('layerremove',{layer:a})):this},setStyle:function(a){return this.invoke('setStyle',a)},bringToFront:function(){return this.invoke('bringToFront')},bringToBack:function(){return this.invoke('bringToBack')},getBounds:function(){var b=new v,c,a;for(c in this._layers)a=this._layers[c],b.extend(a.getBounds?a.getBounds():a.getLatLng());return b}}),dc=function(a,b){return new ac(a,b)},ae=S.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(a){l(this,a)},createIcon:function(a){return this._createIcon('icon',a)},createShadow:function(a){return this._createIcon('shadow',a)},_createIcon:function(a,b){var c=this._getIconUrl(a),d;if(!c){if(a==='icon')throw new Error('iconUrl not set in Icon options (see the docs).');return null}return d=this._createImg(c,b&&b.tagName==='IMG'?b:null),this._setIconStyles(d,a),d},_setIconStyles:function(a,f){var d=this.options,b=d[f+'Size'],c,g;typeof b=='number'&&(b=[b,b]),c=e(b),g=e(f==='shadow'&&d.shadowAnchor||d.iconAnchor||c&&c.divideBy(2,!0)),a.className='leaflet-marker-'+f+' '+(d.className||''),g&&(a.style.marginLeft=-g.x+'px',a.style.marginTop=-g.y+'px'),c&&(a.style.width=c.x+'px',a.style.height=c.y+'px')},_createImg:function(b,a){return a=a||document.createElement('img'),a.src=b,a},_getIconUrl:function(a){return X&&this.options[a+'RetinaUrl']||this.options[a+'Url']}});function da(a){return new ae(a)}at=ae.extend({options:{iconUrl:'marker-icon.png',iconRetinaUrl:'marker-icon-2x.png',shadowUrl:'marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return at.imagePath||(at.imagePath=this._detectIconPath()),(this.options.imagePath||at.imagePath)+ae.prototype._getIconUrl.call(this,a)},_detectIconPath:function(){var b=g('div','leaflet-default-icon-path',document.body),a=aC(b,'background-image')||aC(b,'backgroundImage');return document.body.removeChild(b),a===null||a.indexOf('url')!==0?a='':a=a.replace(/^url\(["']?/,'').replace(/marker-icon\.png["']?\)$/,''),a}}),cY=M.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new aa(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),c(a,'leaflet-marker-draggable')},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&o(this._marker._icon,'leaflet-marker-draggable')},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var d=this._marker,g=d._map,k=this._marker.options.autoPanSpeed,h=this._marker.options.autoPanPadding,c=U(d._icon),b=g.getPixelBounds(),j=g.getPixelOrigin(),a=D(b.min._subtract(j).add(h),b.max._subtract(j).subtract(h)),f;a.contains(c)||(f=e((Math.max(a.max.x,c.x)-a.max.x)/(b.max.x-a.max.x)-(Math.min(a.min.x,c.x)-a.min.x)/(b.min.x-a.min.x),(Math.max(a.max.y,c.y)-a.max.y)/(b.max.y-a.max.y)-(Math.min(a.min.y,c.y)-a.min.y)/(b.min.y-a.min.y)).multiplyBy(k),g.panBy(f,{animate:!1}),this._draggable._newPos._add(f),this._draggable._startPos._add(f),s(d._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=u(this._adjustPan.bind(this,i)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire('movestart').fire('dragstart')},_onPreDrag:function(a){this._marker.options.autoPan&&(w(this._panRequest),this._panRequest=u(this._adjustPan.bind(this,a)))},_onDrag:function(b){var a=this._marker,c=a._shadow,d=U(a._icon),e=a._map.layerPointToLatLng(d);c&&s(c,d),a._latlng=e,b.latlng=e,b.oldLatLng=this._oldLatLng,a.fire('move',b).fire('drag',b)},_onDragEnd:function(a){w(this._panRequest),delete this._oldLatLng,this._marker.fire('moveend').fire('dragend',a)}}),be=C.extend({options:{icon:new at,interactive:!0,keyboard:!0,title:'',alt:'',zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:'markerPane',shadowPane:'shadowPane',bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,b){l(this,b),this._latlng=p(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on('zoomanim',this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off('zoomanim',this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var b=this._latlng;return this._latlng=p(a),this.update(),this.fire('move',{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,e='leaflet-zoom-'+(this._zoomAnimated?'animated':'hide'),b=a.icon.createIcon(this._icon),f=!1,d,g;b!==this._icon&&(this._icon&&this._removeIcon(),f=!0,a.title&&(b.title=a.title),b.tagName==='IMG'&&(b.alt=a.alt||'')),c(b,e),a.keyboard&&(b.tabIndex='0'),this._icon=b,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),d=a.icon.createShadow(this._shadow),g=!1,d!==this._shadow&&(this._removeShadow(),g=!0),d&&(c(d,e),d.alt=''),this._shadow=d,a.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&g&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),n(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&n(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&s(this._icon,a),this._shadow&&s(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(!this.options.interactive)return;if(c(this._icon,'leaflet-interactive'),this.addInteractiveTarget(this._icon),cY){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new cY(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&y(this._icon,a),this._shadow&&y(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function c$(a,b){return new be(a,b)}V=C.extend({options:{stroke:!0,color:'#3388ff',weight:3,opacity:1,lineCap:'round',lineJoin:'round',dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:'evenodd',interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return l(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,'weight')&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),aS=V.extend({options:{fill:!0,radius:10},initialize:function(a,b){l(this,b),this._latlng=p(a),this._radius=this.options.radius},setLatLng:function(a){var b=this._latlng;return this._latlng=p(a),this.redraw(),this.fire('move',{oldLatLng:b,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var b=a&&a.radius||this._radius;return V.prototype.setStyle.call(this,a),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,b=this._clickTolerance(),c=[a+b,d+b];this._pxBounds=new m(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function db(a,b){return new aS(a,b)}bg=aS.extend({initialize:function(b,a,c){if(typeof a=='number'&&(a=j({},c,{radius:a})),l(this,a),this._latlng=p(b),isNaN(this.options.radius))throw new Error('Circle radius cannot be NaN');this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new v(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:V.prototype.setStyle,_project:function(){var g=this._latlng.lng,c=this._latlng.lat,a=this._map,h=a.options.crs,b,e,j,k,f,i,d,l;h.distance===Y.distance?(b=Math.PI/180,e=this._mRadius/Y.R/b,j=a.project([c+e,g]),k=a.project([c-e,g]),f=j.add(k).divideBy(2),i=a.unproject(f).lat,d=Math.acos((Math.cos(e*b)-Math.sin(c*b)*Math.sin(i*b))/(Math.cos(c*b)*Math.cos(i*b)))/b,(isNaN(d)||d===0)&&(d=e/Math.cos(Math.PI/180*c)),this._point=f.subtract(a.getPixelOrigin()),this._radius=isNaN(d)?0:f.x-a.project([i,g-d]).x,this._radiusY=f.y-j.y):(l=h.unproject(h.project(this._latlng).subtract([this._mRadius,0])),this._point=a.latLngToLayerPoint(this._latlng),this._radius=this._point.x-a.latLngToLayerPoint(l).x),this._updateBounds()}});function dd(a,b,c){return new bg(a,b,c)}P=V.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,b){l(this,b),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(h){for(var d=1/0,a=null,i=av,c=0,k=this._parts.length,e,f,g,b,l,j;c<k;c++){g=this._parts[c];for(b=1,l=g.length;b<l;b++)e=g[b-1],f=g[b],j=i(h,e,f,!0),j<d&&(d=j,a=i(h,e,f))}return a&&(a.distance=Math.sqrt(d)),a},getCenter:function(){if(!this._map)throw new Error('Must add layer to map before using getCenter()');var a,d,g,e,f,c,h,b=this._rings[0],i=b.length;if(!i)return null;for(a=0,d=0;a<i-1;a++)d+=b[a].distanceTo(b[a+1])/2;if(d===0)return this._map.layerPointToLatLng(b[0]);for(a=0,e=0;a<i-1;a++)if(f=b[a],c=b[a+1],g=f.distanceTo(c),e+=g,e>d)return h=(e-d)/g,this._map.layerPointToLatLng([c.x-h*(c.x-f.x),c.y-h*(c.y-f.y)])},getBounds:function(){return this._bounds},addLatLng:function(a,b){return b=b||this._defaultShape(),a=p(a),b.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new v,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Q(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(b){for(var c=[],d=Q(b),a=0,e=b.length;a<e;a++)d?(c[a]=p(b[a]),this._bounds.extend(c[a])):c[a]=this._convertLatLngs(b[a]);return c},_project:function(){var a=new m;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),c=new b(a,a);this._pxBounds=new m([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)])},_projectLatlngs:function(b,d,e){var g=b[0]instanceof i,f=b.length,a,c;if(g){c=[];for(a=0;a<f;a++)c[a]=this._map.latLngToLayerPoint(b[a]),e.extend(c[a]);d.push(c)}else for(a=0;a<f;a++)this._projectLatlngs(b[a],d,e)},_clipPoints:function(){var i=this._renderer._bounds,e,f,a,b,h,g,c,d;if(this._parts=[],!this._pxBounds||!this._pxBounds.intersects(i))return;if(this.options.noClip){this._parts=this._rings;return}e=this._parts;for(f=0,b=0,h=this._rings.length;f<h;f++){d=this._rings[f];for(a=0,g=d.length;a<g-1;a++){if(c=cA(d[a],d[a+1],i,a,!0),!c)continue;e[b]=e[b]||[],e[b].push(c[0]),(c[1]!==d[a+1]||a===g-2)&&(e[b].push(c[1]),b++)}}},_simplifyPoints:function(){for(var b=this._parts,c=this.options.smoothFactor,a=0,d=b.length;a<d;a++)b[a]=ct(b[a],c)},_update:function(){if(!this._map)return;this._clipPoints(),this._simplifyPoints(),this._updatePath()},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(g,h){var c,a,e,f,d,b,i=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(c=0,f=this._parts.length;c<f;c++){b=this._parts[c];for(a=0,d=b.length,e=d-1;a<d;e=a++){if(!h&&a===0)continue;if(cu(g,b[e],b[a])<=i)return!0}}return!1}});function df(a,b){return new P(a,b)}P._flat=cG,ad=P.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error('Must add layer to map before using getCenter()');var d,g,a,b,e,c,h,i,j,f=this._rings[0],k=f.length;if(!k)return null;c=h=i=0;for(d=0,g=k-1;d<k;g=d++)a=f[d],b=f[g],e=a.y*b.x-b.y*a.x,h+=(a.x+b.x)*e,i+=(a.y+b.y)*e,c+=e*3;return c===0?j=f[0]:j=[h/c,i/c],this._map.layerPointToLatLng(j)},_convertLatLngs:function(c){var a=P.prototype._convertLatLngs.call(this,c),b=a.length;return b>=2&&a[0]instanceof i&&a[0].equals(a[b-1])&&a.pop(),a},_setLatLngs:function(a){P.prototype._setLatLngs.call(this,a),Q(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Q(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,e=this.options.weight,f=new b(e,e),c,g,d;if(a=new m(a.min.subtract(f),a.max.add(f)),this._parts=[],!this._pxBounds||!this._pxBounds.intersects(a))return;if(this.options.noClip){this._parts=this._rings;return}for(c=0,g=this._rings.length,d;c<g;c++)d=cI(this._rings[c],a,!0),d.length&&this._parts.push(d)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var g=!1,c,b,d,e,f,h,j,i;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(e=0,j=this._parts.length;e<j;e++){c=this._parts[e];for(f=0,i=c.length,h=i-1;f<i;h=f++)b=c[f],d=c[h],b.y>a.y!==d.y>a.y&&a.x<(d.x-b.x)*(a.y-b.y)/(d.y-b.y)+b.x&&(g=!g)}return g||P.prototype._containsPoint.call(this,a,!0)}});function dh(a,b){return new ad(a,b)}T=ac.extend({initialize:function(a,b){l(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var f=F(a)?a:a.features,e,g,c,d,b;if(f){for(e=0,g=f.length;e<g;e++)c=f[e],(c.geometries||c.geometry||c.features||c.coordinates)&&this.addData(c);return this}return d=this.options,d.filter&&!d.filter(a)?this:(b=bl(a,d),!b)?this:(b.feature=aM(a),b.defaultOptions=b.options,this.resetStyle(b),d.onEachFeature&&d.onEachFeature(a,b),this.addLayer(b))},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=j({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(b,a){b.setStyle&&(typeof a=='function'&&(a=a(b.feature)),b.setStyle(a))}});function bl(d,a){var b=d.type==='Feature'?d.geometry:d,e=b?b.coordinates:null,f=[],k=a&&a.pointToLayer,g=a&&a.coordsToLatLng||bp,h,i,c,j,l;if(!e&&!b)return null;switch(b.type){case'Point':return h=g(e),cJ(k,d,h,a);case'MultiPoint':for(c=0,j=e.length;c<j;c++)h=g(e[c]),f.push(cJ(k,d,h,a));return new ac(f);case'LineString':case'MultiLineString':return i=bd(e,b.type==='LineString'?0:1,g),new P(i,a);case'Polygon':case'MultiPolygon':return i=bd(e,b.type==='Polygon'?1:2,g),new ad(i,a);case'GeometryCollection':for(c=0,j=b.geometries.length;c<j;c++)l=bl({geometry:b.geometries[c],type:'Feature',properties:d.properties},a),l&&f.push(l);return new ac(f);default:throw new Error('Invalid GeoJSON object.')}}function cJ(b,d,c,a){return b?b(d,c):new be(c,a&&a.markersInheritOptions&&a)}function bp(a){return new i(a[1],a[0],a[2])}function bd(b,c,d){for(var e=[],a=0,g=b.length,f;a<g;a++)f=c?bd(b[a],c-1,d):(d||bp)(b[a]),e.push(f);return e}function bv(b,a){return a=typeof a=='number'?a:6,b.alt!==void 0?[J(b.lng,a),J(b.lat,a),J(b.alt,a)]:[J(b.lng,a),J(b.lat,a)]}function aR(c,d,e,f){for(var a=[],b=0,g=c.length;b<g;b++)a.push(d?aR(c[b],d-1,e,f):bv(c[b],f));return!d&&e&&a.push(a[0]),a}function an(a,b){return a.feature?j({},a.feature,{geometry:b}):aM(b)}function aM(a){return a.type==='Feature'||a.type==='FeatureCollection'?a:{type:'Feature',properties:{},geometry:a}}bF={toGeoJSON:function(a){return an(this,{type:'Point',coordinates:bv(this.getLatLng(),a)})}},be.include(bF),bg.include(bF),aS.include(bF),P.include({toGeoJSON:function(b){var a=!Q(this._latlngs),c=aR(this._latlngs,a?1:0,!1,b);return an(this,{type:(a?'Multi':'')+'LineString',coordinates:c})}}),ad.include({toGeoJSON:function(d){var a=!Q(this._latlngs),c=a&&!Q(this._latlngs[0]),b=aR(this._latlngs,c?2:a?1:0,!0,d);return a||(b=[b]),an(this,{type:(c?'Multi':'')+'Polygon',coordinates:b})}}),al.include({toMultiPoint:function(b){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(b).geometry.coordinates)}),an(this,{type:'MultiPoint',coordinates:a})},toGeoJSON:function(b){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type,d,a;return c==='MultiPoint'?this.toMultiPoint(b):(d=c==='GeometryCollection',a=[],this.eachLayer(function(f){var e,c;f.toGeoJSON&&(e=f.toGeoJSON(b),d?a.push(e.geometry):(c=aM(e),c.type==='FeatureCollection'?a.push.apply(a,c.features):a.push(c)))}),d)?an(this,{geometries:a,type:'GeometryCollection'}):{type:'FeatureCollection',features:a}}});function ck(a,b){return new T(a,b)}du=ck,aK=C.extend({options:{opacity:1,alt:'',interactive:!1,crossOrigin:!1,errorOverlayUrl:'',zIndex:1,className:''},initialize:function(a,b,c){this._url=a,this._bounds=t(b),l(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(c(this._image,'leaflet-interactive'),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){n(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&aq(this._image),this},bringToBack:function(){return this._map&&ah(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=t(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var b=this._url.tagName==='IMG',a=this._image=b?this._url:g('img');if(c(a,'leaflet-image-layer'),this._zoomAnimated&&c(a,'leaflet-zoom-animated'),this.options.className&&c(a,this.options.className),a.onselectstart=r,a.onmousemove=r,a.onload=k(this.fire,this,'load'),a.onerror=k(this._overlayOnError,this,'error'),(this.options.crossOrigin||this.options.crossOrigin==='')&&(a.crossOrigin=this.options.crossOrigin===!0?'':this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),b){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(a){var b=this._map.getZoomScale(a.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Z(this._image,c,b)},_reset:function(){var a=this._image,b=new m(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=b.getSize();s(a,b.min),a.style.width=c.x+'px',a.style.height=c.y+'px'},_updateOpacity:function(){y(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire('error');var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)}}),dw=function(a,b,c){return new aK(a,b,c)},cg=aK.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var f=this._url.tagName==='VIDEO',a=this._image=f?this._url:g('video'),b,h,d,e,i;if(c(a,'leaflet-image-layer'),this._zoomAnimated&&c(a,'leaflet-zoom-animated'),this.options.className&&c(a,this.options.className),a.onselectstart=r,a.onmousemove=r,a.onloadeddata=k(this.fire,this,'load'),f){b=a.getElementsByTagName('source'),h=[];for(d=0;d<b.length;d++)h.push(b[d].src);this._url=b.length>0?h:[a.src];return}F(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,'objectFit')&&(a.style.objectFit='fill'),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted;for(e=0;e<this._url.length;e++)i=g('source'),i.src=this._url[e],a.appendChild(i)}});function dy(a,b,c){return new cg(a,b,c)}cc=aK.extend({_initImage:function(){var a=this._image=this._url;c(a,'leaflet-image-layer'),this._zoomAnimated&&c(a,'leaflet-zoom-animated'),this.options.className&&c(a,this.options.className),a.onselectstart=r,a.onmousemove=r}});function dA(a,b,c){return new cc(a,b,c)}O=C.extend({options:{offset:[0,7],className:'',pane:'popupPane'},initialize:function(a,b){l(this,a),this._source=b},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&y(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&y(this._container,1),this.bringToFront()},onRemove:function(a){a._fadeAnimated?(y(this._container,0),this._removeTimeout=setTimeout(k(n,void 0,this._container),200)):n(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=p(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){if(!this._map)return;this._container.style.visibility='hidden',this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility='',this._adjustPan()},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&aq(this._container),this},bringToBack:function(){return this._map&&ah(this._container),this},_prepareOpen:function(c,a,b){if(a instanceof C||(b=a,a=c),a instanceof ac)for(var d in c._layers){a=c._layers[d];break}if(!b)if(a.getCenter)b=a.getCenter();else if(a.getLatLng)b=a.getLatLng();else throw new Error('Unable to get source layer LatLng.');return this._source=a,this.update(),b},_updateContent:function(){var a,b;if(!this._content)return;if(a=this._contentNode,b=typeof this._content=='function'?this._content(this._source||this):this._content,typeof b=='string')a.innerHTML=b;else{while(a.hasChildNodes())a.removeChild(a.firstChild);a.appendChild(b)}this.fire('contentupdate')},_updatePosition:function(){var b,a,c,d,f;if(!this._map)return;b=this._map.latLngToLayerPoint(this._latlng),a=e(this.options.offset),c=this._getAnchor(),this._zoomAnimated?s(this._container,b.add(c)):a=a.add(b).add(c),d=this._containerBottom=-a.y,f=this._containerLeft=-Math.round(this._containerWidth/2)+a.x,this._container.style.bottom=d+'px',this._container.style.left=f+'px'},_getAnchor:function(){return[0,0]}}),ap=O.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:''},openOn:function(a){return a.openPopup(this),this},onAdd:function(a){O.prototype.onAdd.call(this,a),a.fire('popupopen',{popup:this}),this._source&&(this._source.fire('popupopen',{popup:this},!0),this._source instanceof V||this._source.on('preclick',$))},onRemove:function(a){O.prototype.onRemove.call(this,a),a.fire('popupclose',{popup:this}),this._source&&(this._source.fire('popupclose',{popup:this},!0),this._source instanceof V||this._source.off('preclick',$))},getEvents:function(){var a=O.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a='leaflet-popup',b=this._container=g('div',a+' '+(this.options.className||'')+' leaflet-zoom-animated'),e=this._wrapper=g('div',a+'-content-wrapper',b),c;this._contentNode=g('div',a+'-content',e),aw(b),bQ(this._contentNode),d(b,'contextmenu',$),this._tipContainer=g('div',a+'-tip-container',b),this._tip=g('div',a+'-tip',this._tipContainer),this.options.closeButton&&(c=this._closeButton=g('a',a+'-close-button',b),c.href='#close',c.innerHTML='&#215;',d(c,'click',this._onCloseButtonClick,this))},_updateLayout:function(){var b=this._contentNode,a=b.style,d,g,e,f;a.width='',a.whiteSpace='nowrap',d=b.offsetWidth,d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),a.width=d+1+'px',a.whiteSpace='',a.height='',g=b.offsetHeight,e=this.options.maxHeight,f='leaflet-popup-scrolled',e&&g>e?(a.height=e+'px',c(b,f)):o(b,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),c=this._getAnchor();s(this._container,b.add(c))},_adjustPan:function(){var i,n,j,l,m,a,k,f,g,h,c,d;if(!this.options.autoPan)return;this._map._panAnim&&this._map._panAnim.stop(),i=this._map,n=parseInt(aC(this._container,'marginBottom'),10)||0,j=this._container.offsetHeight+n,l=this._containerWidth,m=new b(this._containerLeft,-j-this._containerBottom),m._add(U(this._container)),a=i.layerPointToContainerPoint(m),k=e(this.options.autoPanPadding),f=e(this.options.autoPanPaddingTopLeft||k),g=e(this.options.autoPanPaddingBottomRight||k),h=i.getSize(),c=0,d=0,a.x+l+g.x>h.x&&(c=a.x+l-h.x+g.x),a.x-c-f.x<0&&(c=a.x-f.x),a.y+j+g.y>h.y&&(d=a.y+j-h.y+g.y),a.y-d-f.y<0&&(d=a.y-f.y),(c||d)&&i.fire('autopanstart').panBy([c,d])},_onCloseButtonClick:function(a){this._close(),N(a)},_getAnchor:function(){return e(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),dD=function(a,b){return new ap(a,b)},f.mergeOptions({closePopupOnClick:!0}),f.include({openPopup:function(a,b,c){return a instanceof ap||(a=new ap(c).setContent(a)),b&&a.setLatLng(b),this.hasLayer(a)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=a,this.addLayer(a))},closePopup:function(a){return(!a||a===this._popup)&&(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}}),C.include({bindPopup:function(a,b){return a instanceof ap?(l(a,b),this._popup=a,a._source=this):((!this._popup||b)&&(this._popup=new ap(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(b,a){return this._popup&&this._map&&(a=this._popup._prepareOpen(this,b,a),this._map.openPopup(this._popup,a)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(a){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(a)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){var b=a.layer||a.target;if(!this._popup)return;if(!this._map)return;if(N(a),b instanceof V){this.openPopup(a.layer||a.target,a.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===b?this.closePopup():this.openPopup(b,a.latlng)},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}}),ai=O.extend({options:{pane:'tooltipPane',offset:[0,0],direction:'auto',permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(a){O.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire('tooltipopen',{tooltip:this}),this._source&&this._source.fire('tooltipopen',{tooltip:this},!0)},onRemove:function(a){O.prototype.onRemove.call(this,a),a.fire('tooltipclose',{tooltip:this}),this._source&&this._source.fire('tooltipclose',{tooltip:this},!0)},getEvents:function(){var a=O.prototype.getEvents.call(this);return G&&!this.options.permanent&&(a.preclick=this._close),a},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var a='leaflet-tooltip',b=a+' '+(this.options.className||'')+' leaflet-zoom-'+(this._zoomAnimated?'animated':'hide');this._contentNode=this._container=g('div',b)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var a,b,j=this._map,d=this._container,n=j.latLngToContainerPoint(j.getCenter()),m=j.layerPointToContainerPoint(i),f=this.options.direction,h=d.offsetWidth,g=d.offsetHeight,l=e(this.options.offset),k=this._getAnchor();f==='top'?(a=h/2,b=g):f==='bottom'?(a=h/2,b=0):f==='center'?(a=h/2,b=g/2):f==='right'?(a=0,b=g/2):f==='left'?(a=h,b=g/2):m.x<n.x?(f='right',a=0,b=g/2):(f='left',a=h+(l.x+k.x)*2,b=g/2),i=i.subtract(e(a,b,!0)).add(l).add(k),o(d,'leaflet-tooltip-right'),o(d,'leaflet-tooltip-left'),o(d,'leaflet-tooltip-top'),o(d,'leaflet-tooltip-bottom'),c(d,'leaflet-tooltip-'+f),s(d,i)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&y(this._container,a)},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(b)},_getAnchor:function(){return e(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),dF=function(a,b){return new ai(a,b)},f.include({openTooltip:function(a,b,c){return a instanceof ai||(a=new ai(c).setContent(a)),b&&a.setLatLng(b),this.hasLayer(a)?this:this.addLayer(a)},closeTooltip:function(a){return a&&this.removeLayer(a),this}}),C.include({bindTooltip:function(a,b){return a instanceof ai?(l(a,b),this._tooltip=a,a._source=this):((!this._tooltip||b)&&(this._tooltip=new ai(b,this)),this._tooltip.setContent(a)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(b){if(!b&&this._tooltipHandlersAdded)return;var c=b?'off':'on',a={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?a.add=this._openTooltip:(a.mouseover=this._openTooltip,a.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(a.mousemove=this._moveTooltip),G&&(a.click=this._openTooltip)),this[c](a),this._tooltipHandlersAdded=!b},openTooltip:function(b,a){return this._tooltip&&this._map&&(a=this._tooltip._prepareOpen(this,b,a),this._map.openTooltip(this._tooltip,a),this._tooltip.options.interactive&&this._tooltip._container&&(c(this._tooltip._container,'leaflet-clickable'),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(o(this._tooltip._container,'leaflet-clickable'),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(a){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(a)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_openTooltip:function(a){var b=a.layer||a.target;if(!this._tooltip||!this._map)return;this.openTooltip(b,this._tooltip.options.sticky?a.latlng:void 0)},_moveTooltip:function(a){var b=a.latlng,c,d;this._tooltip.options.sticky&&a.originalEvent&&(c=this._map.mouseEventToContainerPoint(a.originalEvent),d=this._map.containerPointToLayerPoint(c),b=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(b)}}),cD=ae.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:'leaflet-div-icon'},createIcon:function(c){var a=c&&c.tagName==='DIV'?c:document.createElement('div'),b=this.options,d;return b.html instanceof Element?(aW(a),a.appendChild(b.html)):a.innerHTML=b.html!==!1?b.html:'',b.bgPos&&(d=e(b.bgPos),a.style.backgroundPosition=-d.x+'px '+-d.y+'px'),this._setIconStyles(a,'icon'),a},createShadow:function(){return null}});function dH(a){return new cD(a)}ae.Default=at,ax=C.extend({options:{tileSize:256,opacity:1,updateWhenIdle:af,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:'tilePane',className:'',keepBuffer:2},initialize:function(a){l(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),n(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(aq(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ah(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=cV(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement('div')},getTileSize:function(){var a=this.options.tileSize;return a instanceof b?a:new b(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var d=this.getPane().children,a=-c(-(1/0),1/0),b=0,f=d.length,e;b<f;b++)e=d[b].style.zIndex,d[b]!==this._container&&e&&(a=c(a,+e));isFinite(a)&&(this.options.zIndex=a+c(-1,1),this._updateZIndex())},_updateOpacity:function(){var e,b,c,f,a,d;if(!this._map)return;if(ag)return;y(this._container,this.options.opacity),e=+new Date,b=!1,c=!1;for(f in this._tiles){if(a=this._tiles[f],!a.current||!a.loaded)continue;d=Math.min(1,(e-a.loaded)/200),y(a.el,d),d<1?b=!0:(a.active?c=!0:this._onOpaqueTile(a),a.active=!0)}c&&!this._noPrune&&this._pruneTiles(),b&&(w(this._fadeFrame),this._fadeFrame=u(this._updateOpacity,this))},_onOpaqueTile:r,_initContainer:function(){if(this._container)return;this._container=g('div','leaflet-layer '+(this.options.className||'')),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container)},_updateLevels:function(){var c=this._tileZoom,e=this.options.maxZoom,a,b,d;if(c===void 0)return void 0;for(a in this._levels)a=Number(a),this._levels[a].el.children.length||a===c?(this._levels[a].el.style.zIndex=e-Math.abs(c-a),this._onUpdateLevel(a)):(n(this._levels[a].el),this._removeTilesAtZoom(a),this._onRemoveLevel(a),delete this._levels[a]);return b=this._levels[c],d=this._map,b||(b=this._levels[c]={},b.el=g('div','leaflet-tile-container leaflet-zoom-animated',this._container),b.el.style.zIndex=e,b.origin=d.project(d.unproject(d.getPixelOrigin()),c).round(),b.zoom=c,this._setZoomTransform(b,d.getCenter(),d.getZoom()),r(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b},_onUpdateLevel:r,_onRemoveLevel:r,_onCreateLevel:r,_pruneTiles:function(){var b,c,d,a;if(!this._map)return;if(d=this._map.getZoom(),d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(b in this._tiles)c=this._tiles[b],c.retain=c.current;for(b in this._tiles)c=this._tiles[b],c.current&&!c.active&&(a=c.coords,this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2));for(b in this._tiles)this._tiles[b].retain||this._removeTile(b)},_removeTilesAtZoom:function(b){for(var a in this._tiles){if(this._tiles[a].coords.z!==b)continue;this._removeTile(a)}},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)n(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,j,h,g){var e=Math.floor(i/2),f=Math.floor(j/2),c=h-1,d=new b(+e,+f),k,a;return d.z=+c,k=this._tileCoordsToKey(d),a=this._tiles[k],a&&a.active?(a.retain=!0,!0):!!(a&&a.loaded&&(a.retain=!0),c>g)&&this._retainParent(e,f,c,g)},_retainChildren:function(f,g,e,h){for(var c=2*f,d,i,j,a;c<2*f+2;c++)for(d=2*g;d<2*g+2;d++){if(i=new b(c,d),i.z=e+1,j=this._tileCoordsToKey(i),a=this._tiles[j],a&&a.active){a.retain=!0;continue}a&&a.loaded&&(a.retain=!0),e+1<h&&this._retainChildren(c,d,e+1,h)}},_resetView:function(a){var b=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(b){var a=this.options;return void 0!==a.minNativeZoom&&b<a.minNativeZoom?a.minNativeZoom:void 0!==a.maxNativeZoom&&a.maxNativeZoom<b?a.maxNativeZoom:b},_setView:function(b,c,d,e){var a=Math.round(c),f;this.options.maxZoom!==void 0&&a>this.options.maxZoom||this.options.minZoom!==void 0&&a<this.options.minZoom?a=void 0:a=this._clampZoom(a),f=this.options.updateWhenZooming&&a!==this._tileZoom,(!e||f)&&(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),a!==void 0&&this._update(b),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(b,c)},_setZoomTransforms:function(a,b){for(var c in this._levels)this._setZoomTransform(this._levels[c],a,b)},_setZoomTransform:function(a,e,b){var c=this._map.getZoomScale(b,a.zoom),d=a.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(e,b)).round();z?Z(a.el,d,c):s(a.el,d)},_resetGrid:function(){var b=this._map,a=b.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,e=this._map.getPixelWorldBounds(this._tileZoom);e&&(this._globalTileRange=this._pxBoundsToTileRange(e)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(b.project([0,a.wrapLng[0]],d).x/c.x),Math.ceil(b.project([0,a.wrapLng[1]],d).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(b.project([a.wrapLat[0],0],d).y/c.x),Math.ceil(b.project([a.wrapLat[1],0],d).y/c.y)]},_onMoveEnd:function(){if(!this._map||this._map._animatingZoom)return;this._update()},_getTiledPixelBounds:function(d){var a=this._map,e=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(e,this._tileZoom),b=a.project(d,this._tileZoom).floor(),c=a.getSize().divideBy(f*2);return new m(b.subtract(c),b.add(c))},_update:function(g){var j=this._map,p,q,a,n,d,e,r,l,i,h,c,f,o,k;if(!j)return;if(p=this._clampZoom(j.getZoom()),g===void 0&&(g=j.getCenter()),this._tileZoom===void 0)return;if(q=this._getTiledPixelBounds(g),a=this._pxBoundsToTileRange(q),n=a.getCenter(),d=[],e=this.options.keepBuffer,r=new m(a.getBottomLeft().subtract([e,-e]),a.getTopRight().add([e,-e])),!(isFinite(a.min.x)&&isFinite(a.min.y)&&isFinite(a.max.x)&&isFinite(a.max.y)))throw new Error('Attempted to load an infinite number of tiles');for(l in this._tiles)i=this._tiles[l].coords,(i.z!==this._tileZoom||!r.contains(new b(i.x,i.y)))&&(this._tiles[l].current=!1);if(Math.abs(p-this._tileZoom)>1){this._setView(g,p);return}for(h=a.min.y;h<=a.max.y;h++)for(c=a.min.x;c<=a.max.x;c++){if(f=new b(c,h),f.z=this._tileZoom,!this._isValidTile(f))continue;o=this._tiles[this._tileCoordsToKey(f)],o?o.current=!0:d.push(f)}if(d.sort(function(a,b){return a.distanceTo(n)-b.distanceTo(n)}),d.length!==0){this._loading||(this._loading=!0,this.fire('loading')),k=document.createDocumentFragment();for(c=0;c<d.length;c++)this._addTile(d[c],k);this._level.el.appendChild(k)}},_isValidTile:function(a){var c=this._map.options.crs,b,d;if(!c.infinite)if(b=this._globalTileRange,!c.wrapLng&&(a.x<b.min.x||a.x>b.max.x)||!c.wrapLat&&(a.y<b.min.y||a.y>b.max.y))return!1;return!this.options.bounds||(d=this._tileCoordsToBounds(a),t(this.options.bounds).overlaps(d))},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var b=this._map,c=this.getTileSize(),d=a.scaleBy(c),e=d.add(c),f=b.unproject(d,a.z),g=b.unproject(e,a.z);return[f,g]},_tileCoordsToBounds:function(c){var b=this._tileCoordsToNwSe(c),a=new v(b[0],b[1]);return this.options.noWrap||(a=this._map.wrapLatLngBounds(a)),a},_tileCoordsToKey:function(a){return a.x+':'+a.y+':'+a.z},_keyToTileCoords:function(d){var a=d.split(':'),c=new b(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(a){var b=this._tiles[a];if(!b)return;n(b.el),delete this._tiles[a],this.fire('tileunload',{tile:b.el,coords:this._keyToTileCoords(a)})},_initTile:function(a){c(a,'leaflet-tile');var b=this.getTileSize();a.style.width=b.x+'px',a.style.height=b.y+'px',a.onselectstart=r,a.onmousemove=r,ag&&this.options.opacity<1&&y(a,this.options.opacity),ay&&!aB&&(a.style.WebkitBackfaceVisibility='hidden')},_addTile:function(a,c){var d=this._getTilePos(a),e=this._tileCoordsToKey(a),b=this.createTile(this._wrapCoords(a),k(this._tileReady,this,a));this._initTile(b),this.createTile.length<2&&u(k(this._tileReady,this,a,null,b)),s(b,d),this._tiles[e]={el:b,coords:a,current:!0},c.appendChild(b),this.fire('tileloadstart',{tile:b,coords:a})},_tileReady:function(b,d,a){d&&this.fire('tileerror',{error:d,tile:a,coords:b});var e=this._tileCoordsToKey(b);if(a=this._tiles[e],!a)return;a.loaded=+new Date,this._map._fadeAnimated?(y(a.el,0),w(this._fadeFrame),this._fadeFrame=u(this._updateOpacity,this)):(a.active=!0,this._pruneTiles()),d||(c(a.el,'leaflet-tile-loaded'),this.fire('tileload',{tile:a.el,coords:b})),this._noTilesToLoad()&&(this._loading=!1,this.fire('load'),ag||!this._map._fadeAnimated?u(this._pruneTiles,this):setTimeout(k(this._pruneTiles,this),250))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var c=new b(this._wrapX?ar(a.x,this._wrapX):a.x,this._wrapY?ar(a.y,this._wrapY):a.y);return c.z=a.z,c},_pxBoundsToTileRange:function(a){var b=this.getTileSize();return new m(a.min.unscaleBy(b).floor(),a.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function dJ(a){return new ax(a)}am=ax.extend({options:{minZoom:0,maxZoom:18,subdomains:'abc',errorTileUrl:'',zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(b,a){this._url=b,a=l(this,a),a.detectRetina&&X&&a.maxZoom>0&&(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom++):(a.zoomOffset++,a.maxZoom--),a.minZoom=Math.max(0,a.minZoom)),typeof a.subdomains=='string'&&(a.subdomains=a.subdomains.split('')),ay||this.on('tileunload',this._onTileRemove)},setUrl:function(b,a){return this._url===b&&a===void 0&&(a=!0),this._url=b,a||this.redraw(),this},createTile:function(c,b){var a=document.createElement('img');return d(a,'load',k(this._tileOnLoad,this,b,a)),d(a,'error',k(this._tileOnError,this,b,a)),(this.options.crossOrigin||this.options.crossOrigin==='')&&(a.crossOrigin=this.options.crossOrigin===!0?'':this.options.crossOrigin),a.alt='',a.setAttribute('role','presentation'),a.src=this.getTileUrl(c),a},getTileUrl:function(a){var b={r:X?'@2x':'',s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()},c;return this._map&&!this._map.options.crs.infinite&&(c=this._globalTileRange.max.y-a.y,this.options.tms&&(b.y=c),b['-y']=c),cQ(this._url,j(b,this.options))},_tileOnLoad:function(a,b){ag?setTimeout(k(a,this,null,b),0):a(null,b)},_tileOnError:function(c,a,d){var b=this.options.errorTileUrl;b&&a.getAttribute('src')!==b&&(a.src=b),c(d,a)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,b=this.options.maxZoom,c=this.options.zoomReverse,d=this.options.zoomOffset;return c&&(a=b-a),a+d},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var b,a;for(b in this._tiles)this._tiles[b].coords.z!==this._tileZoom&&(a=this._tiles[b].el,a.onload=r,a.onerror=r,a.complete||(a.src=aU,n(a),delete this._tiles[b]))},_removeTile:function(a){var b=this._tiles[a];if(!b)return;return cS||b.el.setAttribute('src',aU),ax.prototype._removeTile.call(this,a)},_tileReady:function(b,c,a){if(!this._map||a&&a.getAttribute('src')===aU)return;return ax.prototype._tileReady.call(this,b,c,a)}});function cT(a,b){return new am(a,b)}cN=am.extend({defaultWmsParams:{service:'WMS',request:'GetMap',layers:'',styles:'',format:'image/jpeg',transparent:!1,version:'1.1.1'},options:{crs:null,uppercase:!1},initialize:function(f,a){var b,c,d,e;this._url=f,b=j({},this.defaultWmsParams);for(c in a)c in this.options||(b[c]=a[c]);a=l(this,a),d=a.detectRetina&&X?2:1,e=this.getTileSize(),b.width=e.x*d,b.height=e.y*d,this.wmsParams=b},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?'crs':'srs';this.wmsParams[b]=this._crs.code,am.prototype.onAdd.call(this,a)},getTileUrl:function(c){var d=this._tileCoordsToNwSe(c),e=this._crs,f=D(e.project(d[0]),e.project(d[1])),a=f.min,b=f.max,h=(this._wmsVersion>=1.3&&this._crs===cO?[a.y,a.x,b.y,b.x]:[a.x,a.y,b.x,b.y]).join(','),g=am.prototype.getTileUrl.call(this,c);return g+cZ(this.wmsParams,g,this.options.uppercase)+(this.options.uppercase?'&BBOX=':'&bbox=')+h},setParams:function(a,b){return j(this.wmsParams,a),b||this.redraw(),this}});function dN(a,b){return new cN(a,b)}am.WMS=cN,cT.wms=dN,K=C.extend({options:{padding:.1,tolerance:0},initialize:function(a){l(this,a),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&c(this._container,'leaflet-zoom-animated')),this.getPane().appendChild(this._container),this._update(),this.on('update',this._updatePaths,this)},onRemove:function(){this.off('update',this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,a){var b=this._map.getZoomScale(a,this._zoom),f=U(this._container),c=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),h=this._map.project(e,a),i=h.subtract(g),d=c.multiplyBy(-b).add(f).add(c).subtract(i);z?Z(this._container,d,b):s(this._container,d)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,b=this._map.getSize(),c=this._map.containerPointToLayerPoint(b.multiplyBy(-a)).round();this._bounds=new m(c,c.add(b.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cL=K.extend({getEvents:function(){var a=K.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){K.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement('canvas');d(a,'mousemove',this._onMouseMove,this),d(a,'click dblclick mousedown mouseup contextmenu',this._onClick,this),d(a,'mouseout',this._handleMouseOut,this),this._ctx=a.getContext('2d')},_destroyContainer:function(){w(this._redrawRequest),delete this._ctx,n(this._container),q(this._container),delete this._container},_updatePaths:function(){var a,b;if(this._postponeUpdatePaths)return;this._redrawBounds=null;for(b in this._layers)a=this._layers[b],a._update();this._redraw()},_update:function(){if(this._map._animatingZoom&&this._bounds)return;K.prototype._update.call(this);var b=this._bounds,a=this._container,c=b.getSize(),d=X?2:1;s(a,b.min),a.width=d*c.x,a.height=d*c.y,a.style.width=c.x+'px',a.style.height=c.y+'px',X&&this._ctx.scale(2,2),this._ctx.translate(-b.min.x,-b.min.y),this.fire('update')},_reset:function(){K.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[h(a)]=a;var b=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=b),this._drawLast=b,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,b=d.next,c=d.prev;b?b.prev=c:this._drawLast=c,c?c.next=b:this._drawFirst=b,delete a._order,delete this._layers[h(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=='string'){var d=a.options.dashArray.split(/[, ]+/),e=[],c,b;for(b=0;b<d.length;b++){if(c=Number(d[b]),isNaN(c))return;e.push(c)}a.options._dashArray=e}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){if(!this._map)return;this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||u(this._redraw,this)},_extendRedrawBounds:function(a){if(a._pxBounds){var b=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new m,this._redrawBounds.extend(a._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(a._pxBounds.max.add([b,b]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds,b;a?(b=a.getSize(),this._ctx.clearRect(a.min.x,a.min.y,b.x,b.y)):(this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore())},_draw:function(){var b,a=this._redrawBounds,d,c;this._ctx.save(),a&&(d=a.getSize(),this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,d.x,d.y),this._ctx.clip()),this._drawing=!0;for(c=this._drawFirst;c;c=c.next)b=c.layer,(!a||b._pxBounds&&b._pxBounds.intersects(a))&&b._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(h,i){if(!this._drawing)return;var a,b,g,e,d=h._parts,f=d.length,c=this._ctx;if(!f)return;c.beginPath();for(a=0;a<f;a++){for(b=0,g=d[a].length;b<g;b++)e=d[a][b],c[b?'lineTo':'moveTo'](e.x,e.y);i&&c.closePath()}this._fillStroke(c,h)},_updateCircle:function(b){if(!this._drawing||b._empty())return;var e=b._point,a=this._ctx,d=Math.max(Math.round(b._radius),1),c=(Math.max(Math.round(b._radiusY),1)||d)/d;c!==1&&(a.save(),a.scale(1,c)),a.beginPath(),a.arc(e.x,e.y/c,d,0,Math.PI*2,!1),c!==1&&a.restore(),this._fillStroke(a,b)},_fillStroke:function(b,c){var a=c.options;a.fill&&(b.globalAlpha=a.fillOpacity,b.fillStyle=a.fillColor||a.color,b.fill(a.fillRule||'evenodd')),a.stroke&&a.weight!==0&&(b.setLineDash&&b.setLineDash(c.options&&c.options._dashArray||[]),b.globalAlpha=a.opacity,b.lineWidth=a.weight,b.strokeStyle=a.color,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.stroke())},_onClick:function(a){for(var e=this._map.mouseEventToLayerPoint(a),c=this._drawFirst,d,b;c;c=c.next)b=c.layer,b.options.interactive&&b._containsPoint(e)&&(!(a.type==='click'||a.type!=='preclick')||!this._map._draggableMoved(b))&&(d=b);d&&(bU(a),this._fireEvent([d],a))},_onMouseMove:function(a){if(!this._map||this._map.dragging.moving()||this._map._animatingZoom)return;var b=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,b)},_handleMouseOut:function(b){var a=this._hoveredLayer;a&&(o(this._container,'leaflet-interactive'),this._fireEvent([a],b,'mouseout'),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,f){var b,a,d;if(this._mouseHoverThrottled)return;for(d=this._drawFirst;d;d=d.next)b=d.layer,b.options.interactive&&b._containsPoint(f)&&(a=b);a!==this._hoveredLayer&&(this._handleMouseOut(e),a&&(c(this._container,'leaflet-interactive'),this._fireEvent([a],e,'mouseover'),this._hoveredLayer=a)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(k(function(){this._mouseHoverThrottled=!1},this),32)},_fireEvent:function(b,a,c){this._map._fireDOMEvent(a,c||a.type,b)},_bringToFront:function(d){var a=d._order,b,c;if(!a)return;if(b=a.next,c=a.prev,b)b.prev=c;else return;c?c.next=b:b&&(this._drawFirst=b),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(d)},_bringToBack:function(d){var a=d._order,c,b;if(!a)return;if(c=a.next,b=a.prev,b)b.next=c;else return;c?c.prev=b:b&&(this._drawLast=b),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(d)}});function cK(a){return cy?new cL(a):null}aF=function(){try{return document.namespaces.add('lvml','urn:schemas-microsoft-com:vml'),function(a){return document.createElement('<lvml:'+a+' class="lvml">')}}catch(a){return function(a){return document.createElement('<'+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),dS={_initContainer:function(){this._container=g('div','leaflet-vml-container')},_update:function(){if(this._map._animatingZoom)return;K.prototype._update.call(this),this.fire('update')},_initPath:function(a){var b=a._container=aF('shape');c(b,'leaflet-vml-shape '+(this.options.className||'')),b.coordsize='1 1',a._path=aF('path'),b.appendChild(a._path),this._updateStyle(a),this._layers[h(a)]=a},_addPath:function(a){var b=a._container;this._container.appendChild(b),a.options.interactive&&a.addInteractiveTarget(b)},_removePath:function(a){var b=a._container;n(b),a.removeInteractiveTarget(b),delete this._layers[h(a)]},_updateStyle:function(c){var b=c._stroke,d=c._fill,a=c.options,e=c._container;e.stroked=!!a.stroke,e.filled=!!a.fill,a.stroke?(b||(b=c._stroke=aF('stroke')),e.appendChild(b),b.weight=a.weight+'px',b.color=a.color,b.opacity=a.opacity,a.dashArray?b.dashStyle=F(a.dashArray)?a.dashArray.join(' '):a.dashArray.replace(/( *, *)/g,' '):b.dashStyle='',b.endcap=a.lineCap.replace('butt','flat'),b.joinstyle=a.lineJoin):b&&(e.removeChild(b),c._stroke=null),a.fill?(d||(d=c._fill=aF('fill')),e.appendChild(d),d.color=a.fillColor||a.color,d.opacity=a.fillOpacity):d&&(e.removeChild(d),c._fill=null)},_updateCircle:function(a){var b=a._point.round(),c=Math.round(a._radius),d=Math.round(a._radiusY||c);this._setPath(a,a._empty()?'M0 0':'AL '+b.x+','+b.y+' '+c+','+d+' 0,'+65535*360)},_setPath:function(a,b){a._path.v=b},_bringToFront:function(a){aq(a._container)},_bringToBack:function(a){ah(a._container)}},aO=aP?aF:ci,aH=K.extend({getEvents:function(){var a=K.prototype.getEvents.call(this);return a.zoomstart=this._onZoomStart,a},_initContainer:function(){this._container=aO('svg'),this._container.setAttribute('pointer-events','none'),this._rootGroup=aO('g'),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){n(this._container),q(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(this._map._animatingZoom&&this._bounds)return;K.prototype._update.call(this);var b=this._bounds,a=b.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute('width',a.x),c.setAttribute('height',a.y)),s(c,b.min),c.setAttribute('viewBox',[b.min.x,b.min.y,a.x,a.y].join(' ')),this.fire('update')},_initPath:function(a){var b=a._path=aO('path');a.options.className&&c(b,a.options.className),a.options.interactive&&c(b,'leaflet-interactive'),this._updateStyle(a),this._layers[h(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){n(a._path),a.removeInteractiveTarget(a._path),delete this._layers[h(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(c){var a=c._path,b=c.options;if(!a)return;b.stroke?(a.setAttribute('stroke',b.color),a.setAttribute('stroke-opacity',b.opacity),a.setAttribute('stroke-width',b.weight),a.setAttribute('stroke-linecap',b.lineCap),a.setAttribute('stroke-linejoin',b.lineJoin),b.dashArray?a.setAttribute('stroke-dasharray',b.dashArray):a.removeAttribute('stroke-dasharray'),b.dashOffset?a.setAttribute('stroke-dashoffset',b.dashOffset):a.removeAttribute('stroke-dashoffset')):a.setAttribute('stroke','none'),b.fill?(a.setAttribute('fill',b.fillColor||b.color),a.setAttribute('fill-opacity',b.fillOpacity),a.setAttribute('fill-rule',b.fillRule||'evenodd')):a.setAttribute('fill','none')},_updatePoly:function(a,b){this._setPath(a,ce(a._parts,b))},_updateCircle:function(a){var c=a._point,b=Math.max(Math.round(a._radius),1),e=Math.max(Math.round(a._radiusY),1)||b,d='a'+b+','+e+' 0 1,0 ',f=a._empty()?'M0 0':'M'+(c.x-b)+','+c.y+d+b*2+',0 '+d+-b*2+',0 ';this._setPath(a,f)},_setPath:function(a,b){a._path.setAttribute('d',b)},_bringToFront:function(a){aq(a._path)},_bringToBack:function(a){ah(a._path)}}),aP&&aH.include(dS);function cx(a){return aV||aP?new aH(a):null}f.include({getRenderer:function(b){var a=b.options.renderer||this._getPaneRenderer(b.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(a){if(a==='overlayPane'||a===void 0)return!1;var b=this._paneRenderers[a];return b===void 0&&(b=this._createRenderer({pane:a}),this._paneRenderers[a]=b),b},_createRenderer:function(a){return this.options.preferCanvas&&cK(a)||cx(a)}}),cs=ad.extend({initialize:function(a,b){ad.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=t(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function dX(a,b){return new cs(a,b)}aH.create=aO,aH.pointsToPath=ce,T.geometryToLayer=bl,T.coordsToLatLng=bp,T.coordsToLatLngs=bd,T.latLngToCoords=bv,T.latLngsToCoords=aR,T.getFeature=an,T.asFeature=aM,f.mergeOptions({boxZoom:!0}),co=M.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on('unload',this._destroy,this)},addHooks:function(){d(this._container,'mousedown',this._onMouseDown,this)},removeHooks:function(){q(this._container,'mousedown',this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){n(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),aD(),bz(),this._startPoint=this._map.mouseEventToContainerPoint(a),d(document,{contextmenu:N,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(d){this._moved||(this._moved=!0,this._box=g('div','leaflet-zoom-box',this._container),c(this._container,'leaflet-crosshair'),this._map.fire('boxzoomstart')),this._point=this._map.mouseEventToContainerPoint(d);var a=new m(this._point,this._startPoint),b=a.getSize();s(this._box,a.min),this._box.style.width=b.x+'px',this._box.style.height=b.y+'px'},_finish:function(){this._moved&&(n(this._box),o(this._container,'leaflet-crosshair')),aA(),bA(),q(document,{contextmenu:N,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(a.which!==1&&a.button!==1)return;if(this._finish(),!this._moved)return;this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(k(this._resetState,this),0);var b=new v(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire('boxzoomend',{boxZoomBounds:b})},_onKeyDown:function(a){a.keyCode===27&&this._finish()}}),f.addInitHook('addHandler','boxZoom',co),f.mergeOptions({doubleClickZoom:!0}),b_=M.extend({addHooks:function(){this._map.on('dblclick',this._onDoubleClick,this)},removeHooks:function(){this._map.off('dblclick',this._onDoubleClick,this)},_onDoubleClick:function(b){var a=this._map,c=a.getZoom(),d=a.options.zoomDelta,e=b.originalEvent.shiftKey?c-d:c+d;a.options.doubleClickZoom==='center'?a.setZoom(e):a.setZoomAround(b.containerPoint,e)}}),f.addInitHook('addHandler','doubleClickZoom',b_),f.mergeOptions({dragging:!0,inertia:!aB,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),cn=M.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new aa(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on('predrag',this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on('predrag',this._onPreDragWrap,this),a.on('zoomend',this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}c(this._map._container,'leaflet-grab leaflet-touch-drag'),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){o(this._map._container,'leaflet-grab'),o(this._map._container,'leaflet-touch-drag'),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map,b;a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(b=t(this._map.options.maxBounds),this._offsetLimit=D(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,a.fire('movestart').fire('dragstart'),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var b=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(b),this._prunePositions(b)}this._map.fire('move',a).fire('drag',a)},_prunePositions:function(a){while(this._positions.length>1&&a-this._times[0]>50)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,b){return a-(a-b)*this._viscosity},_onPreDragLimit:function(){var a,b;if(!this._viscosity||!this._offsetLimit)return;a=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit,a.x<b.min.x&&(a.x=this._viscousLimit(a.x,b.min.x)),a.y<b.min.y&&(a.y=this._viscousLimit(a.y,b.min.y)),a.x>b.max.x&&(a.x=this._viscousLimit(a.x,b.max.x)),a.y>b.max.y&&(a.y=this._viscousLimit(a.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)},_onPreDragWrap:function(){var c=this._worldWidth,b=Math.round(c/2),a=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+a)%c+b-a,f=(d+b+a)%c-b-a,g=Math.abs(e+a)<Math.abs(f+a)?e:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(m){var a=this._map,c=a.options,j=!c.inertia||this._times.length<2,i,l,d,f,g,h,k,e,b;a.fire('dragend',m),j?a.fire('moveend'):(this._prunePositions(+new Date),i=this._lastPos.subtract(this._positions[0]),l=(this._lastTime-this._times[0])/1e3,d=c.easeLinearity,f=i.multiplyBy(d/l),g=f.distanceTo([0,0]),h=Math.min(c.inertiaMaxSpeed,g),k=f.multiplyBy(h/g),e=h/(c.inertiaDeceleration*d),b=k.multiplyBy(-e/2).round(),!b.x&&!b.y?a.fire('moveend'):(b=a._limitOffset(b,a.options.maxBounds),u(function(){a.panBy(b,{duration:e,easeLinearity:d,noMoveStart:!0,animate:!0})})))}}),f.addInitHook('addHandler','dragging',cn),f.mergeOptions({keyboard:!0,keyboardPanDelta:80}),cz=M.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex='0'),d(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),q(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(this._focused)return;var a=document.body,b=document.documentElement,c=a.scrollTop||b.scrollTop,d=a.scrollLeft||b.scrollLeft;this._map._container.focus(),window.scrollTo(d,c)},_onFocus:function(){this._focused=!0,this._map.fire('focus')},_onBlur:function(){this._focused=!1,this._map.fire('blur')},_setPanDelta:function(d){var e=this._panKeys={},b=this.keyCodes,a,c;for(a=0,c=b.left.length;a<c;a++)e[b.left[a]]=[-1*d,0];for(a=0,c=b.right.length;a<c;a++)e[b.right[a]]=[d,0];for(a=0,c=b.down.length;a<c;a++)e[b.down[a]]=[0,d];for(a=0,c=b.up.length;a<c;a++)e[b.up[a]]=[0,-1*d]},_setZoomDelta:function(d){var e=this._zoomKeys={},b=this.keyCodes,a,c;for(a=0,c=b.zoomIn.length;a<c;a++)e[b.zoomIn[a]]=d;for(a=0,c=b.zoomOut.length;a<c;a++)e[b.zoomOut[a]]=-d},_addHooks:function(){d(document,'keydown',this._onKeyDown,this)},_removeHooks:function(){q(document,'keydown',this._onKeyDown,this)},_onKeyDown:function(b){if(b.altKey||b.ctrlKey||b.metaKey)return;var c=b.keyCode,a=this._map,d;if(c in this._panKeys)(!a._panAnim||!a._panAnim._inProgress)&&(d=this._panKeys[c],b.shiftKey&&(d=e(d).multiplyBy(3)),a.panBy(d),a.options.maxBounds&&a.panInsideBounds(a.options.maxBounds));else if(c in this._zoomKeys)a.setZoom(a.getZoom()+(b.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&a._popup&&a._popup.options.closeOnEscapeKey)a.closePopup();else return;N(b)}}),f.addInitHook('addHandler','keyboard',cz),f.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),cB=M.extend({addHooks:function(){d(this._map._container,'wheel',this._onWheelScroll,this),this._delta=0},removeHooks:function(){q(this._map._container,'wheel',this._onWheelScroll,this)},_onWheelScroll:function(a){var b=bX(a),c=this._map.options.wheelDebounceTime,d;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date),d=Math.max(c-(+new Date-this._startTime),0),clearTimeout(this._timer),this._timer=setTimeout(k(this._performZoom,this),d),N(a)},_performZoom:function(){var a=this._map,b=a.getZoom(),c=this._map.options.zoomSnap||0,g,e,f,d;if(a._stop(),g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),e=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,f=c?Math.ceil(e/c)*c:e,d=a._limitZoom(b+(this._delta>0?f:-f))-b,this._delta=0,this._startTime=null,!d)return;a.options.scrollWheelZoom==='center'?a.setZoom(b+d):a.setZoomAround(this._lastMousePos,b+d)}}),f.addInitHook('addHandler','scrollWheelZoom',cB),f.mergeOptions({tap:!0,tapTolerance:15}),cR=M.extend({addHooks:function(){d(this._map._container,'touchstart',this._onDown,this)},removeHooks:function(){q(this._map._container,'touchstart',this._onDown,this)},_onDown:function(e){if(!e.touches)return;if(A(e),this._fireClick=!0,e.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var a=e.touches[0],f=a.target;this._startPos=this._newPos=new b(a.clientX,a.clientY),f.tagName&&f.tagName.toLowerCase()==='a'&&c(f,'leaflet-active'),this._holdTimeout=setTimeout(k(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent('contextmenu',a))},this),1e3),this._simulateEvent('mousedown',a),d(document,{touchmove:this._onMove,touchend:this._onUp},this)},_onUp:function(b){if(clearTimeout(this._holdTimeout),q(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&b&&b.changedTouches){var c=b.changedTouches[0],a=c.target;a&&a.tagName&&a.tagName.toLowerCase()==='a'&&o(a,'leaflet-active'),this._simulateEvent('mouseup',c),this._isTapValid()&&this._simulateEvent('click',c)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(c){var a=c.touches[0];this._newPos=new b(a.clientX,a.clientY),this._simulateEvent('mousemove',a)},_simulateEvent:function(c,a){var b=document.createEvent('MouseEvents');b._simulated=!0,a.target._simulatedClick=!0,b.initMouseEvent(c,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(b)}}),G&&(!I||bc)&&f.addInitHook('addHandler','tap',cR),f.mergeOptions({touchZoom:G&&!aB,bounceAtZoomLimits:!0}),cX=M.extend({addHooks:function(){c(this._map._container,'leaflet-touch-zoom'),d(this._map._container,'touchstart',this._onTouchStart,this)},removeHooks:function(){o(this._map._container,'leaflet-touch-zoom'),q(this._map._container,'touchstart',this._onTouchStart,this)},_onTouchStart:function(b){var a=this._map,c,e;if(!b.touches||b.touches.length!==2||a._animatingZoom||this._zooming)return;c=a.mouseEventToContainerPoint(b.touches[0]),e=a.mouseEventToContainerPoint(b.touches[1]),this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=='center'&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(e)._divideBy(2))),this._startDist=c.distanceTo(e),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),d(document,'touchmove',this._onTouchMove,this),d(document,'touchend',this._onTouchEnd,this),A(b)},_onTouchMove:function(c){var a,e,f,b,d,g;if(!c.touches||c.touches.length!==2||!this._zooming)return;if(a=this._map,e=a.mouseEventToContainerPoint(c.touches[0]),f=a.mouseEventToContainerPoint(c.touches[1]),b=e.distanceTo(f)/this._startDist,this._zoom=a.getScaleZoom(b,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&b<1||this._zoom>a.getMaxZoom()&&b>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==='center'){if(this._center=this._startLatLng,b===1)return}else{if(d=e._add(f)._divideBy(2)._subtract(this._centerPoint),b===1&&d.x===0&&d.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(d),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),w(this._animRequest),g=k(a._move,a,this._center,this._zoom,{pinch:!0,round:!1}),this._animRequest=u(g,this,!0),A(c)},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,w(this._animRequest),q(document,'touchmove',this._onTouchMove,this),q(document,'touchend',this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}}),f.addInitHook('addHandler','touchZoom',cX),f.BoxZoom=co,f.DoubleClickZoom=b_,f.Drag=cn,f.Keyboard=cz,f.ScrollWheelZoom=cB,f.Tap=cR,f.TouchZoom=cX,a.version=ec,a.Control=E,a.control=aI,a.Browser=dU,a.Evented=aE,a.Mixin=dr,a.Util=ea,a.Class=S,a.Handler=M,a.extend=j,a.bind=k,a.stamp=h,a.setOptions=l,a.DomEvent=dB,a.DomUtil=dE,a.PosAnimation=ca,a.Draggable=aa,a.LineUtil=dl,a.PolyUtil=dk,a.Point=b,a.point=e,a.Bounds=m,a.bounds=D,a.Transformation=bB,a.transformation=aG,a.Projection=dj,a.LatLng=i,a.latLng=p,a.LatLngBounds=v,a.latLngBounds=t,a.CRS=R,a.GeoJSON=T,a.geoJSON=ck,a.geoJson=du,a.Layer=C,a.LayerGroup=al,a.layerGroup=de,a.FeatureGroup=ac,a.featureGroup=dc,a.ImageOverlay=aK,a.imageOverlay=dw,a.VideoOverlay=cg,a.videoOverlay=dy,a.SVGOverlay=cc,a.svgOverlay=dA,a.DivOverlay=O,a.Popup=ap,a.popup=dD,a.Tooltip=ai,a.tooltip=dF,a.Icon=ae,a.icon=da,a.DivIcon=cD,a.divIcon=dH,a.Marker=be,a.marker=c$,a.TileLayer=am,a.tileLayer=cT,a.GridLayer=ax,a.gridLayer=dJ,a.SVG=aH,a.svg=cx,a.Renderer=K,a.Canvas=cL,a.canvas=cK,a.Path=V,a.CircleMarker=aS,a.circleMarker=db,a.Circle=bg,a.circle=dd,a.Polyline=P,a.polyline=df,a.Polygon=ad,a.polygon=dh,a.Rectangle=cs,a.rectangle=dX,a.Map=f,a.map=dz,ed=window.L,a.noConflict=function(){return window.L=ed,this},window.L=a}),L.Control.Fullscreen=L.Control.extend({options:{position:'topleft',title:{false:'View Fullscreen',true:'Exit Fullscreen'}},onAdd:function(b){var a=L.DomUtil.create('div','leaflet-control-fullscreen leaflet-bar leaflet-control');return this.link=L.DomUtil.create('a','leaflet-control-fullscreen-button leaflet-bar-part',a),this.link.href='#',this._map=b,this._map.on('fullscreenchange',this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,'click',this._click,this),a},_click:function(a){L.DomEvent.stopPropagation(a),L.DomEvent.preventDefault(a),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(b){var a=this.getContainer();this.isFullscreen()?b&&b.pseudoFullscreen?this._disablePseudoFullscreen(a):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(a):b&&b.pseudoFullscreen?this._enablePseudoFullscreen(a):a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):a.msRequestFullscreen?a.msRequestFullscreen():this._enablePseudoFullscreen(a)},_enablePseudoFullscreen:function(a){L.DomUtil.addClass(a,'leaflet-pseudo-fullscreen'),this._setFullscreen(!0),this.invalidateSize(),this.fire('fullscreenchange')},_disablePseudoFullscreen:function(a){L.DomUtil.removeClass(a,'leaflet-pseudo-fullscreen'),this._setFullscreen(!1),this.invalidateSize(),this.fire('fullscreenchange')},_setFullscreen:function(a){this._isFullscreen=a;var b=this.getContainer();a?L.DomUtil.addClass(b,'leaflet-fullscreen-on'):L.DomUtil.removeClass(b,'leaflet-fullscreen-on')},_onFullscreenChange:function(b){var a=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;a===this.getContainer()&&!this._isFullscreen?(this._setFullscreen(!0),this.fire('fullscreenchange')):a!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire('fullscreenchange'))}}),L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook(function(){var a,b;this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl)),'onfullscreenchange'in document?a='fullscreenchange':'onmozfullscreenchange'in document?a='mozfullscreenchange':'onwebkitfullscreenchange'in document?a='webkitfullscreenchange':'onmsfullscreenchange'in document&&(a='MSFullscreenChange'),a&&(b=L.bind(this._onFullscreenChange,this),this.whenReady(function(){L.DomEvent.on(document,a,b)}),this.on('unload',function(){L.DomEvent.off(document,a,b)}))}),L.control.fullscreen=function(a){return new L.Control.Fullscreen(a)};var L=L||require('leaflet'),_MAX_POINT_INTERVAL_MS=15e3,_SECOND_IN_MILLIS=1e3,_MINUTE_IN_MILLIS=60*_SECOND_IN_MILLIS,_HOUR_IN_MILLIS=60*_MINUTE_IN_MILLIS,_DAY_IN_MILLIS=24*_HOUR_IN_MILLIS,_GPX_STYLE_NS='http://www.topografix.com/GPX/gpx_style/0/2',_DEFAULT_MARKER_OPTS={startIconUrl:'pin-icon-start.png',endIconUrl:'pin-icon-end.png',shadowUrl:'pin-shadow.png',wptIcons:[],wptIconsType:[],wptIconUrls:{'':'pin-icon-wpt.png'},wptIconTypeUrls:{'':'pin-icon-wpt.png'},pointMatchers:[],iconSize:[33,50],shadowSize:[50,50],iconAnchor:[16,45],shadowAnchor:[16,47],clickable:!1},_DEFAULT_POLYLINE_OPTS={color:'blue'},_DEFAULT_GPX_OPTS={parseElements:['track','route','waypoint'],joinTrackSegments:!0};L.GPX=L.FeatureGroup.extend({initialize:function(b,a){a.max_point_interval=a.max_point_interval||_MAX_POINT_INTERVAL_MS,a.marker_options=this._merge_objs(_DEFAULT_MARKER_OPTS,a.marker_options||{}),a.polyline_options=a.polyline_options||{},a.gpx_options=this._merge_objs(_DEFAULT_GPX_OPTS,a.gpx_options||{}),L.Util.setOptions(this,a),L.GPXTrackIcon=L.Icon.extend({options:a.marker_options}),this._gpx=b,this._layers={},this._init_info(),b&&this._parse(b,a,this.options.async)},get_duration_string2:function(a,d){var b='',c;return _DAY_IN_MILLIS<=a&&(b+=Math.floor(a/_DAY_IN_MILLIS)+'d ',a%=_DAY_IN_MILLIS),_HOUR_IN_MILLIS<=a&&(b+=Math.floor(a/_HOUR_IN_MILLIS)+':',a%=_HOUR_IN_MILLIS),c=Math.floor(a/_MINUTE_IN_MILLIS),a%=_MINUTE_IN_MILLIS,c<10&&(b+='0'),b+=c+"'",c=Math.floor(a/_SECOND_IN_MILLIS),(a%=_SECOND_IN_MILLIS,c<10&&(b+='0'),b+=c,b+=!d&&0<a?'.'+Math.round(1e3*Math.floor(a))/1e3:'"')},get_duration_string:function(a,g){let b=a,e=Math.floor(a/_DAY_IN_MILLIS);a%=_DAY_IN_MILLIS;let c=Math.floor(a/_HOUR_IN_MILLIS);a%=_HOUR_IN_MILLIS;let d=Math.floor(a/_MINUTE_IN_MILLIS);a%=_MINUTE_IN_MILLIS;let f=Math.floor(a/1e3);return b>=_DAY_IN_MILLIS?e+"d "+c+"h ":b>=_HOUR_IN_MILLIS?c+"h "+d+"m ":b>0?d+"m "+f+"s":""},get_duration_string_iso:function(a,b){return this.get_duration_string(a,b).replace("'",':').replace('"','')},get_start_coords:function(){return this._info.start_coords},to_ft:function(a){return 3.28084*a},m_to_km:function(a){return a/1e3},m_to_mi:function(a){return a/1609.34},get_name:function(){return this._info.name},get_desc:function(){return this._info.desc},get_author:function(){return this._info.author},get_copyright:function(){return this._info.copyright},get_distance:function(){return this._info.length},get_distance_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))},get_start_time:function(){return this._info.duration.start},get_end_time:function(){return this._info.duration.end},get_moving_time:function(){return this._info.duration.moving},get_total_time:function(){return this._info.duration.total},get_duration:function(){return this._info.duration.end-this._info.duration.start},get_average_speed:function(){return this.m_to_km(this.get_distance())/(this.get_duration()/36e5)},get_exercise_type:function(){return this._info.type},get_time:function(){return this._info.time},get_moving_pace:function(){return this.get_moving_time()/this.m_to_km(this.get_distance())},get_moving_pace_imp:function(){return this.get_moving_time()/this.get_distance_imp()},get_moving_speed:function(){return this.m_to_km(this.get_distance())/(this.get_moving_time()/36e5)},get_moving_speed_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))/(this.get_moving_time()/36e5)},get_total_speed:function(){return this.m_to_km(this.get_distance())/(this.get_total_time()/36e5)},get_total_speed_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))/(this.get_total_time()/36e5)},get_elevation_gain:function(){return this._info.elevation.gain},get_elevation_loss:function(){return this._info.elevation.loss},get_elevation_gain_imp:function(){return this.to_ft(this.get_elevation_gain())},get_elevation_loss_imp:function(){return this.to_ft(this.get_elevation_loss())},get_elevation_data:function(){var a=this;return this._info.elevation._points.map(function(b){return a._prepare_data_point(b,a.m_to_km,null,function(a,b){return a.toFixed(2)+' km, '+b.toFixed(0)+' m'})})},get_elevation_data_imp:function(){var a=this;return this._info.elevation._points.map(function(b){return a._prepare_data_point(b,a.m_to_mi,a.to_ft,function(a,b){return a.toFixed(2)+' mi, '+b.toFixed(0)+' ft'})})},get_elevation_max:function(){return this._info.elevation.max},get_elevation_min:function(){return this._info.elevation.min},get_elevation_max_imp:function(){return this.to_ft(this.get_elevation_max())},get_elevation_min_imp:function(){return this.to_ft(this.get_elevation_min())},get_average_hr:function(){return this._info.hr.avg},get_average_temp:function(){return this._info.atemp.avg},get_average_cadence:function(){return this._info.cad.avg},get_heartrate_data:function(){var a=this;return this._info.hr._points.map(function(b){return a._prepare_data_point(b,a.m_to_km,null,function(a,b){return a.toFixed(2)+' km, '+b.toFixed(0)+' bpm'})})},get_heartrate_data_imp:function(){var a=this;return this._info.hr._points.map(function(b){return a._prepare_data_point(b,a.m_to_mi,null,function(a,b){return a.toFixed(2)+' mi, '+b.toFixed(0)+' bpm'})})},get_cadence_data:function(){var a=this;return this._info.cad._points.map(function(b){return a._prepare_data_point(b,a.m_to_km,null,function(a,b){return a.toFixed(2)+' km, '+b.toFixed(0)+' rpm'})})},get_temp_data:function(){var a=this;return this._info.atemp._points.map(function(b){return a._prepare_data_point(b,a.m_to_km,null,function(a,b){return a.toFixed(2)+' km, '+b.toFixed(0)+' degrees'})})},get_cadence_data_imp:function(){var a=this;return this._info.cad._points.map(function(b){return a._prepare_data_point(b,a.m_to_mi,null,function(a,b){return a.toFixed(2)+' mi, '+b.toFixed(0)+' rpm'})})},get_temp_data_imp:function(){var a=this;return this._info.atemp._points.map(function(b){return a._prepare_data_point(b,a.m_to_mi,null,function(a,b){return a.toFixed(2)+' mi, '+b.toFixed(0)+' degrees'})})},reload:function(){this._init_info(),this.clearLayers(),this._parse(this._gpx,this.options,this.options.async)},_merge_objs:function(c,d){var a,b={};for(a in c)b[a]=c[a];for(a in d)b[a]=d[a];return b},_prepare_data_point:function(a,b,c,d){return a=[b&&b(a[0])||a[0],c&&c(a[1])||a[1]],a.push(d&&d(a[0],a[1])||a[0]+': '+a[1]),a},_init_info:function(){this._info={name:null,length:0,start_coords:[0,0],end_coords:[1,1],elevation:{gain:0,loss:0,max:0,min:1/0,_points:[]},hr:{avg:0,_total:0,_points:[]},duration:{start:null,end:null,moving:0,total:0},atemp:{avg:0,_total:0,_points:[]},cad:{avg:0,_total:0,_points:[]}}},_load_xml:function(d,e,b,c){null==c&&(c=this.options.async),null==b&&(b=this.options);var a=new window.XMLHttpRequest;a.open('GET',d,c);try{a.overrideMimeType('text/xml')}catch(a){}a.onreadystatechange=function(){4==a.readyState&&200==a.status&&e(a.responseXML,b)},a.send(null)},_parse:function(a,c,f){function d(c,d){var a=b._parse_gpx_data(c,d);a?(b.addLayer(a),b.fire('loaded',{layers:a,element:c})):b.fire('error',{err:'No parseable layers of type(s) '+JSON.stringify(d.gpx_options.parseElements)})}var e,b=this;'<'===a.substr(0,1)?(e=new DOMParser,f?setTimeout(function(){d(e.parseFromString(a,'text/xml'),c)}):d(e.parseFromString(a,'text/xml'),c)):this._load_xml(a,d,c,f)},_parse_gpx_data:function(g,c){var e,d=[],b,t,a,u,s,v,w,j,i,p,h,o,f,r,m,k,n,l,q;if(0<(o=g.getElementsByTagName('name')).length&&(this._info.name=o[0].textContent),0<(r=g.getElementsByTagName('desc')).length&&(this._info.desc=r[0].textContent),b=g.getElementsByTagName('author'),0<b.length&&(this._info.author=b[0].textContent),b=g.getElementsByTagName('copyright'),0<b.length&&(this._info.copyright=b[0].textContent),b=g.getElementsByTagName('type'),0<b.length&&(this._info.type=b[0].textContent),b=g.getElementsByTagName('time'),0<b.length&&(this._info.time=b[0].textContent),b=c.gpx_options.parseElements,-1<b.indexOf('route'))for(t=g.getElementsByTagName('rte'),a=0;a<t.length;a++)d=d.concat(this._parse_segment(t[a],c,{},'rtept'));if(-1<b.indexOf('track')){u=g.getElementsByTagName('trk');for(a=0;a<u.length;a++)if(s=u[a],v=this._extract_styling(s),c.gpx_options.joinTrackSegments)d=d.concat(this._parse_segment(s,c,v,'trkpt'));else for(w=s.getElementsByTagName('trkseg'),j=0;j<w.length;j++)d=d.concat(this._parse_segment(w[j],c,v,'trkpt'))}if(this._info.hr.avg=Math.round(this._info.hr._total/this._info.hr._points.length),this._info.cad.avg=Math.round(this._info.cad._total/this._info.cad._points.length),this._info.atemp.avg=Math.round(this._info.atemp._total/this._info.atemp._points.length),-1<b.indexOf('waypoint'))for(e=g.getElementsByTagName('wpt'),a=0;a<e.length;a++){if(p=new L.LatLng(e[a].getAttribute('lat'),e[a].getAttribute('lon')),h=e[a].getElementsByTagName('name'),o=0<h.length?h[0].textContent:null,f=e[a].getElementsByTagName('desc'),r=0<f.length?f[0].textContent:null,m=e[a].getElementsByTagName('sym'),k=0<m.length?m[0].textContent:null,n=e[a].getElementsByTagName('type'),l=0<n.length?n[0].textContent:null,h=c.marker_options.wptIcons,f=c.marker_options.wptIconUrls,m=c.marker_options.wptIconsType,n=c.marker_options.wptIconTypeUrls,q=c.marker_options.pointMatchers||[],h&&k&&h[k])i=h[k];else if(m&&l&&m[l])i=m[l];else if(f&&k&&f[k])i=new L.GPXTrackIcon({iconUrl:f[k]});else if(n&&l&&n[l])i=new L.GPXTrackIcon({iconUrl:n[l]});else if(0<q.length){for(j=0;j<q.length;j++)if(q[j].regex.test(o)){i=q[j].icon;break}}else h&&h['']?i=h['']:f&&f['']&&(i=new L.GPXTrackIcon({iconUrl:f['']}));i?((p=new L.Marker(p,{clickable:c.marker_options.clickable,title:o,icon:i,type:'waypoint'})).bindPopup('<b>'+o+'</b>'+(0<r.length?'<br>'+r:'')).openPopup(),this.fire('addpoint',{point:p,point_type:'waypoint',element:e[a]}),d.push(p)):console.log('No waypoint icon could be matched for symKey=%s,typeKey=%s,name=%s on waypoint %o',k,l,o,e[a])}return 1<d.length?new L.FeatureGroup(d):1==d.length?d[0]:void 0},_parse_segment:function(n,d,k,p){var e=n.getElementsByTagName(p),h,g,i,j,c,b,a,o,m,l,f;if(!e.length)return[];for(h=[],g=[],i=[],j=null,c=0;c<e.length;c++){if(a=new L.LatLng(e[c].getAttribute('lat'),e[c].getAttribute('lon')),(a.meta={time:null,ele:null,hr:null,cad:null,atemp:null},0<(b=e[c].getElementsByTagName('time')).length?a.meta.time=new Date(Date.parse(b[0].textContent)):a.meta.time=new Date('1970-01-01T00:00:00'),0<(b=e[c].getElementsByTagName('ele')).length&&(a.meta.ele=parseFloat(b[0].textContent)),0<(b=e[c].getElementsByTagName('name')).length))for(o=b[0].textContent,m=d.marker_options.pointMatchers||[],l=0;l<m.length;l++)if(m[l].regex.test(o)){g.push({label:o,coords:a,icon:m[l].icon,element:e[c]});break}0<(b=e[c].getElementsByTagNameNS('*','hr')).length&&(a.meta.hr=parseInt(b[0].textContent),this._info.hr._points.push([this._info.length,a.meta.hr]),this._info.hr._total+=a.meta.hr),0<(b=e[c].getElementsByTagNameNS('*','cad')).length&&(a.meta.cad=parseInt(b[0].textContent),this._info.cad._points.push([this._info.length,a.meta.cad]),this._info.cad._total+=a.meta.cad),0<(b=e[c].getElementsByTagNameNS('*','atemp')).length&&(a.meta.atemp=parseInt(b[0].textContent),this._info.atemp._points.push([this._info.length,a.meta.atemp]),this._info.atemp._total+=a.meta.atemp),a.meta.ele>this._info.elevation.max&&(this._info.elevation.max=a.meta.ele),a.meta.ele<this._info.elevation.min&&(this._info.elevation.min=a.meta.ele),this._info.elevation._points.push([this._info.length,a.meta.ele]),this._info.duration.end=a.meta.time,null!=j?(this._info.length+=this._dist3d(j,a),0<(b=a.meta.ele-j.meta.ele)?this._info.elevation.gain+=b:this._info.elevation.loss+=Math.abs(b),b=Math.abs(a.meta.time-j.meta.time),this._info.duration.total+=b,b<d.max_point_interval&&(this._info.duration.moving+=b)):null==this._info.duration.start&&(this._info.duration.start=a.meta.time),j=a,h.push(a)}k=new L.Polyline(h,this._extract_styling(n,k,d.polyline_options)),this.fire('addline',{line:k,element:n}),i.push(k),(d.marker_options.startIcon||d.marker_options.startIconUrl)&&(f=new L.Marker(h[0],{clickable:d.marker_options.clickable,icon:d.marker_options.startIcon||new L.GPXTrackIcon({iconUrl:d.marker_options.startIconUrl})}),this.fire('addpoint',{point:f,point_type:'start',element:e[0]}),i.push(f)),(d.marker_options.endIcon||d.marker_options.endIconUrl)&&(f=new L.Marker(h[h.length-1],{clickable:d.marker_options.clickable,icon:d.marker_options.endIcon||new L.GPXTrackIcon({iconUrl:d.marker_options.endIconUrl})}),this.fire('addpoint',{point:f,point_type:'end',element:e[e.length-1]}),i.push(f));for(c=0;c<g.length;c++)f=new L.Marker(g[c].coords,{clickable:d.marker_options.clickable,title:g[c].label,icon:g[c].icon}),this.fire('addpoint',{point:f,point_type:'label',element:g[c].element}),i.push(f);return i},_extract_styling:function(a,b,d){var c=this._merge_objs(_DEFAULT_POLYLINE_OPTS,b),b=a.getElementsByTagNameNS(_GPX_STYLE_NS,'line');return 0<b.length&&(0<(a=b[0].getElementsByTagName('color')).length&&(c.color='#'+a[0].textContent),0<(a=b[0].getElementsByTagName('opacity')).length&&(c.opacity=a[0].textContent),0<(a=b[0].getElementsByTagName('weight')).length&&(c.weight=a[0].textContent),0<(a=b[0].getElementsByTagName('linecap')).length&&(c.lineCap=a[0].textContent)),this._merge_objs(c,d)},_dist2d:function(b,c){var d=this._deg2rad(c.lat-b.lat),a=this._deg2rad(c.lng-b.lng),a=Math.sin(d/2)*Math.sin(d/2)+Math.cos(this._deg2rad(b.lat))*Math.cos(this._deg2rad(c.lat))*Math.sin(a/2)*Math.sin(a/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))},_dist3d:function(a,b){var c=this._dist2d(a,b),a=Math.abs(b.meta.ele-a.meta.ele);return Math.sqrt(Math.pow(c,2)+Math.pow(a,2))},_deg2rad:function(a){return a*Math.PI/180}}),'object'==typeof module&&'object'==typeof module.exports?module.exports=L:'function'==typeof define&&define.amd&&define(L)