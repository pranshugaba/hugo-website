{{ $pages := where .Site.RegularPages "Type" "in" .Site.Params.mainSections }}
{{ $pages := where $pages "Type" "ne" "minis" }}

{{ range $pages.GroupByDate "2006" }}
  <section id="{{ .Key }}" class="archive-year">
    <h2 class="list__key">{{ .Key }}</h2>
    <ul class="items__list">
        {{ range .Pages }}
        <li>
          {{ partial "list/archive.html" . }}
        </li>
        {{ end }}
    </ul>
  </section>
{{ end }}